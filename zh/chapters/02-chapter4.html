<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>動態符號鏈接的細節 | C 語言編程透視</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.1.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-google_code_prettify/google-code-prettify.css">
        
    
    

        
    
    
    <link rel="next" href="../../zh/chapters/02-chapter5.html" />
    
    
    <link rel="prev" href="../../zh/chapters/02-chapter3.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="6" data-basepath="../.." data-revision="Wed Sep 02 2015 11:09:18 GMT+0800 (CST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="zh/preface/01-chapter0.html">
            
                
                    <a href="../../zh/preface/01-chapter0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        版本修訂歷史
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="zh/preface/01-chapter1.html">
            
                
                    <a href="../../zh/preface/01-chapter1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        前言
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="zh/chapters/02-chapter1.html">
            
                
                    <a href="../../zh/chapters/02-chapter1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        把 Vim 打造成源代碼編輯器
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="zh/chapters/02-chapter2.html">
            
                
                    <a href="../../zh/chapters/02-chapter2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Gcc 編譯的背後
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="zh/chapters/02-chapter3.html">
            
                
                    <a href="../../zh/chapters/02-chapter3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        程序執行的一剎那
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="6" data-path="zh/chapters/02-chapter4.html">
            
                
                    <a href="../../zh/chapters/02-chapter4.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        動態符號鏈接的細節
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="zh/chapters/02-chapter5.html">
            
                
                    <a href="../../zh/chapters/02-chapter5.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        緩衝區溢出與注入分析
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="zh/chapters/02-chapter6.html">
            
                
                    <a href="../../zh/chapters/02-chapter6.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        進程的內存映像
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="zh/chapters/02-chapter7.html">
            
                
                    <a href="../../zh/chapters/02-chapter7.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        進程和進程的基本操作
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="zh/chapters/02-chapter8.html">
            
                
                    <a href="../../zh/chapters/02-chapter8.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        打造史上最小可執行ELF文件(45字節)
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="zh/chapters/02-chapter9.html">
            
                
                    <a href="../../zh/chapters/02-chapter9.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        代碼測試、調試與優化
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >C 語言編程透視</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="%E5%8B%95%E6%85%8B%E7%AC%A6%E8%99%9F%E9%8F%88%E6%8E%A5%E7%9A%84%E7%B4%B0%E7%AF%80">&#x52D5;&#x614B;&#x7B26;&#x865F;&#x93C8;&#x63A5;&#x7684;&#x7D30;&#x7BC0;</h1>
<ul>
<li><a href="#toc_23258_14315_1">&#x524D;&#x8A00;</a></li>
<li><a href="#toc_23258_14315_2">&#x57FA;&#x672C;&#x6982;&#x5FF5;</a><ul>
<li><a href="#toc_23258_14315_3">ELF</a></li>
<li><a href="#toc_23258_14315_4">&#x7B26;&#x865F;</a></li>
<li><a href="#toc_23258_14315_5">&#x91CD;&#x5B9A;&#x4F4D;&#xFF1A;<a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">&#x662F;&#x5C07;&#x7B26;&#x865F;&#x5F15;&#x7528;&#x8207;&#x7B26;&#x865F;&#x5B9A;&#x7FA9;&#x9032;&#x884C;&#x93C8;&#x63A5;&#x7684;&#x904E;&#x7A0B;</a></a></li>
<li><a href="#toc_23258_14315_6">&#x52D5;&#x614B;&#x93C8;&#x63A5;</a></li>
<li><a href="#toc_23258_14315_7">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;</a></li>
<li><a href="#toc_23258_14315_8">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#xFF08;dynamic linker/loader&#xFF09;</a></li>
<li><a href="#toc_23258_14315_9">&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#xFF08;plt&#xFF09;</a></li>
<li><a href="#toc_23258_14315_10">&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#xFF08;got&#xFF09;</a></li>
<li><a href="#toc_23258_14315_11">&#x91CD;&#x5B9A;&#x4F4D;&#x8868;</a></li>
</ul>
</li>
<li><a href="#toc_23258_14315_12">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5275;&#x5EFA;&#x548C;&#x8ABF;&#x7528;</a><ul>
<li><a href="#toc_23258_14315_13">&#x5275;&#x5EFA;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;</a></li>
<li><a href="#toc_23258_14315_14">&#x96B1;&#x5F0F;&#x4F7F;&#x7528;&#x8A72;&#x5EAB;</a></li>
<li><a href="#toc_23258_14315_15">&#x986F;&#x5F0F;&#x4F7F;&#x7528;&#x5EAB;</a></li>
</ul>
</li>
<li><a href="#toc_23258_14315_16">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x904E;&#x7A0B;</a></li>
<li><a href="#toc_23258_14315_17">&#x53C3;&#x8003;&#x8CC7;&#x6599;</a></li>
</ul>
<p><span id="toc_23258_14315_1"></span></p>
<h2 id="%E5%89%8D%E8%A8%80">&#x524D;&#x8A00;</h2>
<p>Linux &#x652F;&#x6301;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF0C;&#x4E0D;&#x50C5;&#x7BC0;&#x7701;&#x4E86;&#x78C1;&#x76E4;&#x3001;&#x5167;&#x5B58;&#x7A7A;&#x9593;&#xFF0C;&#x800C;&#x4E14;<a href="http://www.ccw.com.cn/htm/app/linux/develop/01_8_6_2.asp" target="_blank">&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x6548;&#x7387;</a>&#x3002;&#x4E0D;&#x904E;&#x5F15;&#x5165;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x4E5F;&#x53EF;&#x80FD;&#x6703;&#x5E36;&#x4F86;&#x5F88;&#x591A;&#x554F;&#x984C;&#xFF0C;&#x4F8B;&#x5982;<a href="http://unix-cd.com/unixcd12/article_5065.html" target="_blank">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x8ABF;&#x8A66;</a>&#x3001;<a href="http://www.ibm.com/developerworks/linux/library/l-shlibs.html" target="_blank">&#x5347;&#x7D1A;&#x66F4;&#x65B0;</a>&#x548C;&#x6F5B;&#x5728;&#x7684;&#x5B89;&#x5168;&#x5A01;&#x8105;<a href="http://fanqiang.chinaunix.net/safe/system/2007-02-01/4870.shtml" target="_blank">[1]</a>, <a href="http://article.pchome.net/content-323084.html" target="_blank">[2]</a>&#x3002;&#x9019;&#x88E1;&#x4E3B;&#x8981;&#x8A0E;&#x8AD6;&#x7B26;&#x865F;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x904E;&#x7A0B;&#xFF0C;&#x5373;&#x7A0B;&#x5E8F;&#x5728;&#x57F7;&#x884C;&#x904E;&#x7A0B;&#x4E2D;&#xFF0C;&#x5C0D;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x4E00;&#x4E9B;&#x672A;&#x78BA;&#x5B9A;&#x5730;&#x5740;&#x7684;&#x7B26;&#x865F;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#x7684;&#x904E;&#x7A0B;<a href="http://elfhack.whitecell.org/mydocs/ELF_symbol_resolve_process1.txt" target="_blank">[1]</a>, <a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[2]</a>&#x3002;</p>
<p>&#x672C;&#x7BC7;&#x4E3B;&#x8981;&#x53C3;&#x8003;&#x8CC7;&#x6599;<a href="http://elfhack.whitecell.org/mydocs/ELF_symbol_resolve_process1.txt" target="_blank">[3]</a>&#x548C;<a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[8]</a>&#xFF0C;&#x524D;&#x8005;&#x5074;&#x91CD;&#x5BE6;&#x8E10;&#xFF0C;&#x5F8C;&#x8005;&#x5074;&#x91CD;&#x539F;&#x7406;&#xFF0C;&#x628A;&#x5169;&#x8005;&#x7D50;&#x5408;&#x8D77;&#x4F86;&#x5C31;&#x65B9;&#x4FBF;&#x7406;&#x89E3;&#x7A0B;&#x5E8F;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x904E;&#x7A0B;&#x4E86;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5275;&#x5EFA;&#x3001;&#x4F7F;&#x7528;&#x4EE5;&#x53CA;&#x8ABF;&#x7528;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x90E8;&#x5206;&#x53C3;&#x8003;&#x4E86;&#x8CC7;&#x6599;<a href="http://www.ccw.com.cn/htm/app/linux/develop/01_8_6_2.asp" target="_blank">[1]</a>, <a href="http://www.vchome.net/tech/dll/dll9.htm" target="_blank">[2]</a>&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x5148;&#x4F86;&#x770B;&#x770B;&#x5E7E;&#x500B;&#x57FA;&#x672C;&#x6982;&#x5FF5;&#xFF0C;&#x63A5;&#x8457;&#x5C31;&#x4ECB;&#x7D39;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5275;&#x5EFA;&#x3001;&#x96B1;&#x5F0F;&#x548C;&#x986F;&#x793A;&#x8ABF;&#x7528;&#xFF0C;&#x6700;&#x5F8C;&#x4ECB;&#x7D39;&#x7B26;&#x865F;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7D30;&#x7BC0;&#x3002;</p>
<p><span id="toc_23258_14315_2"></span></p>
<h2 id="%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">&#x57FA;&#x672C;&#x6982;&#x5FF5;</h2>
<p><span id="toc_23258_14315_3"></span></p>
<h3 id="elf">ELF</h3>
<p><code>ELF</code> &#x662F; Linux &#x652F;&#x6301;&#x7684;&#x4E00;&#x7A2E;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF0C;&#x672C;&#x8EAB;&#x5305;&#x542B;&#x91CD;&#x5B9A;&#x4F4D;&#x3001;&#x57F7;&#x884C;&#x3001;&#x5171;&#x4EAB;&#xFF08;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF09;&#x4E09;&#x7A2E;&#x985E;&#x578B;&#xFF08;<code>man elf</code>&#xFF09;&#x3002;</p>
<p>&#x4EE3;&#x78BC;&#xFF1A;</p>
<pre><code>/* test.c */
#include &lt;stdio.h&gt;    

int global = 0;

int main()
{
        char local = &apos;A&apos;;

        printf(&quot;local = %c, global = %d\n&quot;, local, global);

        return 0;
}
</code></pre><p>&#x6F14;&#x793A;&#xFF1A;</p>
<p>&#x901A;&#x904E; <code>-c</code> &#x751F;&#x6210;&#x53EF;&#x91CD;&#x5B9A;&#x4F4D;&#x6587;&#x4EF6; <code>test.o</code>&#xFF0C;&#x9019;&#x88E1;&#x4E0D;&#x6703;&#x9032;&#x884C;&#x93C8;&#x63A5;&#xFF1A;</p>
<pre><code>$ gcc -c test.c
$ file test.o
test.o: ELF 32-bit LSB relocatable, Intel 80386, version 1 (SYSV), not stripped
</code></pre><p>&#x93C8;&#x63A5;&#x5F8C;&#x624D;&#x53EF;&#x4EE5;&#x57F7;&#x884C;&#xFF1A;</p>
<pre><code>$ gcc -o test test.o
$ file test
test: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), not stripped
</code></pre><p>&#x4E5F;&#x53EF;&#x93C8;&#x63A5;&#x6210;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF0C;&#x4E0D;&#x904E;&#x4E00;&#x822C;&#x4E0D;&#x6703;&#x628A; <code>main</code> &#x51FD;&#x6578;&#x93C8;&#x63A5;&#x6210;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF0C;&#x5F8C;&#x9762;&#x518D;&#x4ECB;&#x7D39;&#xFF1A;</p>
<pre><code>$ gcc -fpic -shared -W1,-soname,libtest.so.0 -o libtest.so.0.0 test.o
$ file libtest.so.0.0
libtest.so.0.0: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), not stripped
</code></pre><p>&#x96D6;&#x7136; <code>ELF</code> &#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x5C31;&#x652F;&#x6301;&#x4E09;&#x7A2E;&#x4E0D;&#x540C;&#x7684;&#x985E;&#x578B;&#xFF0C;&#x4E0D;&#x904E;&#x5B83;&#x6709;&#x4E00;&#x500B;&#x7D71;&#x4E00;&#x7684;&#x7D50;&#x69CB;&#x3002;&#x9019;&#x500B;&#x7D50;&#x69CB;&#x662F;&#xFF1A;</p>
<pre><code>&#x6587;&#x4EF6;&#x982D;&#x90E8;(ELF Header)
&#x7A0B;&#x5E8F;&#x982D;&#x90E8;&#x8868;(Program Header Table)
&#x7BC0;&#x5340;1(Section1)
&#x7BC0;&#x5340;2(Section2)
&#x7BC0;&#x5340;3(Section3)
...
&#x7BC0;&#x5340;&#x982D;&#x90E8;&#x8868;(Section Header Table)
</code></pre><p>&#x7121;&#x8AD6;&#x662F;&#x6587;&#x4EF6;&#x982D;&#x90E8;&#x3001;&#x7A0B;&#x5E8F;&#x982D;&#x90E8;&#x8868;&#x3001;&#x7BC0;&#x5340;&#x982D;&#x90E8;&#x8868;&#xFF0C;&#x9084;&#x662F;&#x7BC0;&#x5340;&#xFF0C;&#x5B83;&#x5011;&#x90FD;&#x5C0D;&#x61C9;&#x8457; C &#x8A9E;&#x8A00;&#x88E1;&#x982D;&#x7684;&#x4E00;&#x4E9B;&#x7D50;&#x69CB;&#x9AD4;&#xFF08;<code>elf.h</code> &#x4E2D;&#x5B9A;&#x7FA9;&#xFF09;&#x3002;&#x6587;&#x4EF6;&#x982D;&#x90E8;&#x4E3B;&#x8981;&#x63CF;&#x8FF0; <code>ELF</code> &#x6587;&#x4EF6;&#x7684;&#x985E;&#x578B;&#xFF0C;&#x5927;&#x5C0F;&#xFF0C;&#x904B;&#x884C;&#x5E73;&#x81FA;&#xFF0C;&#x4EE5;&#x53CA;&#x548C;&#x7A0B;&#x5E8F;&#x982D;&#x90E8;&#x8868;&#x548C;&#x7BC0;&#x5340;&#x982D;&#x90E8;&#x8868;&#x76F8;&#x95DC;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x7BC0;&#x5340;&#x982D;&#x90E8;&#x8868;&#x5247;&#x7528;&#x65BC;&#x53EF;&#x91CD;&#x5B9A;&#x4F4D;&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x4FBF;&#x63CF;&#x8FF0;&#x5404;&#x500B;&#x7BC0;&#x5340;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x9019;&#x4E9B;&#x4FE1;&#x606F;&#x5305;&#x62EC;&#x7BC0;&#x5340;&#x7684;&#x540D;&#x5B57;&#x3001;&#x985E;&#x578B;&#x3001;&#x5927;&#x5C0F;&#x7B49;&#x3002;&#x7A0B;&#x5E8F;&#x982D;&#x90E8;&#x8868;&#x5247;&#x7528;&#x65BC;&#x63CF;&#x8FF0;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF0C;&#x4EE5;&#x4FBF;&#x7CFB;&#x7D71;&#x52A0;&#x8F09;&#x548C;&#x57F7;&#x884C;&#x5B83;&#x5011;&#x3002;&#x800C;&#x7BC0;&#x5340;&#x4E3B;&#x8981;&#x5B58;&#x653E;&#x5404;&#x7A2E;&#x7279;&#x5B9A;&#x985E;&#x578B;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x7A0B;&#x5E8F;&#x7684;&#x6B63;&#x6587;&#x5340;&#xFF08;&#x4EE3;&#x78BC;&#xFF09;&#x3001;&#x6578;&#x64DA;&#x5340;&#xFF08;&#x521D;&#x59CB;&#x5316;&#x548C;&#x672A;&#x521D;&#x59CB;&#x5316;&#x7684;&#x6578;&#x64DA;&#xFF09;&#x3001;&#x8ABF;&#x8A66;&#x4FE1;&#x606F;&#x3001;&#x4EE5;&#x53CA;&#x7528;&#x65BC;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7684;&#x4E00;&#x4E9B;&#x7BC0;&#x5340;&#xFF0C;&#x6BD4;&#x5982;&#x89E3;&#x91CB;&#x5668;&#xFF08;<code>.interp</code>&#xFF09;&#x7BC0;&#x5340;&#x5C07;&#x6307;&#x5B9A;&#x7A0B;&#x5E8F;&#x52D5;&#x614B;&#x88DD;&#x8F09; <code>/</code> &#x93C8;&#x63A5;&#x5668; <code>ld-linux.so</code> &#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x800C;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#xFF08;<code>plt</code>&#xFF09;&#x3001;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#xFF08;<code>got</code>&#xFF09;&#x3001;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x5247;&#x7528;&#x65BC;&#x8F14;&#x52A9;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x904E;&#x7A0B;&#x3002;</p>
<p><span id="toc_23258_14315_4"></span></p>
<h3 id="%E7%AC%A6%E8%99%9F">&#x7B26;&#x865F;</h3>
<p>&#x5C0D;&#x65BC;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x9664;&#x4E86;&#x7DE8;&#x8B6F;&#x5668;&#x5F15;&#x5165;&#x7684;&#x4E00;&#x4E9B;&#x7B26;&#x865F;&#x5916;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x7528;&#x6236;&#x81EA;&#x5B9A;&#x7FA9;&#x7684;&#x5168;&#x5C40;&#x8B8A;&#x91CF;&#xFF0C;&#x51FD;&#x6578;&#x7B49;&#xFF0C;&#x800C;&#x5C0D;&#x65BC;&#x53EF;&#x91CD;&#x5B9A;&#x4F4D;&#x6587;&#x4EF6;&#x50C5;&#x50C5;&#x5305;&#x542B;&#x7528;&#x6236;&#x81EA;&#x5B9A;&#x7FA9;&#x7684;&#x4E00;&#x4E9B;&#x7B26;&#x865F;&#x3002;</p>
<ul>
<li><p>&#x751F;&#x6210;&#x53EF;&#x91CD;&#x5B9A;&#x4F4D;&#x6587;&#x4EF6;</p>
<pre><code>  $ gcc -c test.c
  $ nm test.o
  00000000 B global
  00000000 T main
           U printf
</code></pre><p>  &#x4E0A;&#x9762;&#x5305;&#x542B;&#x5168;&#x5C40;&#x8B8A;&#x91CF;&#x3001;&#x81EA;&#x5B9A;&#x7FA9;&#x51FD;&#x6578;&#x4EE5;&#x53CA;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x4E2D;&#x7684;&#x51FD;&#x6578;&#xFF0C;&#x4F46;&#x4E0D;&#x5305;&#x542B;&#x5C40;&#x90E8;&#x8B8A;&#x91CF;&#xFF0C;&#x800C;&#x4E14;&#x767C;&#x73FE;&#x9019;&#x4E09;&#x500B;&#x7B26;&#x865F;&#x7684;&#x5730;&#x5740;&#x90FD;&#x6C92;&#x6709;&#x78BA;&#x5B9A;&#x3002;</p>
<p>  &#x6CE8;&#xFF1A; <code>nm</code> &#x547D;&#x4EE4;&#x53EF;&#x7528;&#x4F86;&#x67E5;&#x770B; <code>ELF</code> &#x6587;&#x4EF6;&#x7684;&#x7B26;&#x865F;&#x8868;&#x4FE1;&#x606F;&#x3002;</p>
</li>
<li><p>&#x751F;&#x6210;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;</p>
</li>
</ul>
<pre><code>    $ gcc -o test test.o
    $ nm test | egrep &quot;main$| printf|global$&quot;
    080495a0 B global
    08048354 T main
             U printf@@GLIBC_2.0

&#x7D93;&#x93C8;&#x63A5;&#xFF0C;`global` &#x548C; `main` &#x7684;&#x5730;&#x5740;&#x90FD;&#x5DF2;&#x7D93;&#x78BA;&#x5B9A;&#x4E86;&#xFF0C;&#x4F46;&#x662F; `printf` &#x537B;&#x9084;&#x6C92;&#xFF0C;&#x56E0;&#x70BA;&#x5B83;&#x662F;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB; `glibc` &#x4E2D;&#x5B9A;&#x7FA9;&#x51FD;&#x6578;&#xFF0C;&#x9700;&#x8981;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x9019;&#x88E1;&#x7684;&#x201C;&#x975C;&#x614B;&#x201D;&#x93C8;&#x63A5;&#x3002;
</code></pre><p><span id="toc_23258_14315_5"></span></p>
<h3 id="%E9%87%8D%E5%AE%9A%E4%BD%8D%EF%BC%9A-%E6%98%AF%E5%B0%87%E7%AC%A6%E8%99%9F%E5%BC%95%E7%94%A8%E8%88%87%E7%AC%A6%E8%99%9F%E5%AE%9A%E7%BE%A9%E9%80%B2%E8%A1%8C%E9%8F%88%E6%8E%A5%E7%9A%84%E9%81%8E%E7%A8%8B-8">&#x91CD;&#x5B9A;&#x4F4D;&#xFF1A;<a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">&#x662F;&#x5C07;&#x7B26;&#x865F;&#x5F15;&#x7528;&#x8207;&#x7B26;&#x865F;&#x5B9A;&#x7FA9;&#x9032;&#x884C;&#x93C8;&#x63A5;&#x7684;&#x904E;&#x7A0B;</a></h3>
<p>&#x5F9E;&#x4E0A;&#x9762;&#x7684;&#x6F14;&#x793A;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x91CD;&#x5B9A;&#x4F4D;&#x6587;&#x4EF6; <code>test.o</code> &#x4E2D;&#x7684;&#x7B26;&#x865F;&#x5730;&#x5740;&#x90FD;&#x662F;&#x6C92;&#x6709;&#x78BA;&#x5B9A;&#x7684;&#xFF0C;&#x800C;&#x7D93;&#x904E;&#x975C;&#x614B;&#x93C8;&#x63A5;&#xFF08;<code>gcc</code> &#x9ED8;&#x8A8D;&#x8ABF;&#x7528; <code>ld</code> &#x9032;&#x884C;&#x93C8;&#x63A5;&#xFF09;&#x4EE5;&#x5F8C;&#x6709;&#x5169;&#x500B;&#x7B26;&#x865F;&#x5730;&#x5740;&#x5DF2;&#x7D93;&#x78BA;&#x5B9A;&#x4E86;&#xFF0C;&#x9019;&#x6A23;&#x4E00;&#x500B;&#x78BA;&#x5B9A;&#x7B26;&#x865F;&#x5730;&#x5740;&#x7684;&#x904E;&#x7A0B;&#x5BE6;&#x969B;&#x4E0A;&#x5C31;&#x662F;&#x93C8;&#x63A5;&#x7684;&#x5BE6;&#x8CEA;&#x3002;&#x93C8;&#x63A5;&#x904E;&#x5F8C;&#xFF0C;&#x5C0D;&#x7B26;&#x865F;&#x7684;&#x5F15;&#x7528;&#x8B8A;&#x6210;&#x4E86;&#x5C0D;&#x5730;&#x5740;&#xFF08;&#x5B9A;&#x7FA9;&#x7B26;&#x865F;&#x6642;&#x78BA;&#x5B9A;&#x8A72;&#x5730;&#x5740;&#xFF09;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x9019;&#x6A23;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x6642;&#x5C31;&#x53EF;&#x901A;&#x904E;&#x8A2A;&#x554F;&#x5167;&#x5B58;&#x5730;&#x5740;&#x800C;&#x8A2A;&#x554F;&#x7279;&#x5B9A;&#x7684;&#x6578;&#x64DA;&#x3002;</p>
<p>&#x6211;&#x5011;&#x4E5F;&#x6CE8;&#x610F;&#x5230;&#x7B26;&#x865F; <code>printf</code> &#x5728;&#x53EF;&#x91CD;&#x5B9A;&#x4F4D;&#x6587;&#x4EF6;&#x548C;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5730;&#x5740;&#x90FD;&#x6C92;&#x6709;&#x78BA;&#x5B9A;&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x8A72;&#x7B26;&#x865F;&#x662F;&#x4E00;&#x500B;&#x5916;&#x90E8;&#x7B26;&#x865F;&#xFF0C;&#x53EF;&#x80FD;&#x5B9A;&#x7FA9;&#x5728;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x4E2D;&#xFF0C;&#x5728;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x6642;&#x9700;&#x8981;&#x901A;&#x904E;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#xFF08;<code>ld-linux.so</code>&#xFF09;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#xFF0C;&#x5373;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x3002;</p>
<p>&#x901A;&#x904E;&#x9019;&#x500B;&#x6F14;&#x793A;&#x53EF;&#x4EE5;&#x770B;&#x51FA; <code>printf</code> &#x78BA;&#x5BE6;&#x5728; <code>glibc</code> &#x4E2D;&#x6709;&#x5B9A;&#x7FA9;&#x3002;</p>
<pre><code>$ nm -D /lib/`uname -m`-linux-gnu/libc.so.6 | grep &quot;\ printf$&quot;
0000000000053840 T printf
</code></pre><p>&#x9664;&#x4E86; <code>nm</code> &#x4EE5;&#x5916;&#xFF0C;&#x9084;&#x53EF;&#x4EE5;&#x7528; <code>readelf -s</code> &#x67E5;&#x770B; <code>.dynsym</code> &#x8868;&#x6216;&#x8005;&#x7528; <code>objdump -tT</code> &#x67E5;&#x770B;&#x3002;</p>
<p>&#x9700;&#x8981;&#x63D0;&#x5230;&#x7684;&#x662F;&#xFF0C;&#x7528; <code>nm</code> &#x547D;&#x4EE4;&#x4E0D;&#x5E36; <code>-D</code> &#x53C3;&#x6578;&#x7684;&#x8A71;&#xFF0C;&#x5728;&#x8F03;&#x65B0;&#x7684;&#x7CFB;&#x7D71;&#x4E0A;&#x5DF2;&#x7D93;&#x6C92;&#x6709;&#x8FA6;&#x6CD5;&#x67E5;&#x770B; <code>libc.so</code> &#x7684;&#x7B26;&#x865F;&#x8868;&#x4E86;&#xFF0C;&#x56E0;&#x70BA; <code>nm</code> &#x9ED8;&#x8A8D;&#x6253;&#x5370;&#x5E38;&#x898F;&#x7B26;&#x865F;&#x8868;&#xFF08;&#x5728; <code>.symtab</code> &#x548C; <code>.strtab</code> &#x7BC0;&#x5340;&#x4E2D;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x6253;&#x5305;&#x6642;&#x70BA;&#x4E86;&#x6E1B;&#x5C11;&#x7CFB;&#x7D71;&#x5927;&#x5C0F;&#xFF0C;&#x9019;&#x4E9B;&#x7B26;&#x865F;&#x5DF2;&#x7D93;&#x88AB; <code>strip</code> &#x6389;&#x4E86;&#xFF0C;&#x53EA;&#x4FDD;&#x7559;&#x4E86;&#x52D5;&#x614B;&#x7B26;&#x865F;&#xFF08;&#x5728; <code>.dynsym</code> &#x548C; <code>.dynstr</code> &#x4E2D;&#xFF09;&#x4EE5;&#x4FBF;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x5728;&#x57F7;&#x884C;&#x7A0B;&#x5E8F;&#x6642;&#x5C0B;&#x5740;&#x9019;&#x4E9B;&#x5916;&#x90E8;&#x7528;&#x5230;&#x7684;&#x7B26;&#x865F;&#x3002;&#x800C;&#x5E38;&#x898F;&#x7B26;&#x865F;&#x9664;&#x4E86;&#x52D5;&#x614B;&#x7B26;&#x865F;&#x4EE5;&#x5916;&#xFF0C;&#x9084;&#x5305;&#x542B;&#x6709;&#x4E00;&#x4E9B;&#x975C;&#x614B;&#x7B26;&#x865F;&#xFF0C;&#x6BD4;&#x5982;&#x8AAA;&#x672C;&#x5730;&#x51FD;&#x6578;&#xFF0C;&#x9019;&#x500B;&#x4FE1;&#x606F;&#x4E3B;&#x8981;&#x662F;&#x8ABF;&#x8A66;&#x5668;&#x6703;&#x7528;&#xFF0C;&#x5C0D;&#x65BC;&#x6B63;&#x5E38;&#x90E8;&#x7F72;&#x7684;&#x7CFB;&#x7D71;&#xFF0C;&#x4E00;&#x822C;&#x6703;&#x7528; <code>strip</code> &#x5DE5;&#x5177;&#x522A;&#x9664;&#x6389;&#x3002;</p>
<p>&#x95DC;&#x65BC; <code>nm</code> &#x8207; <code>readelf -s</code> &#x7684;&#x8A73;&#x7D30;&#x6BD4;&#x8F03;&#xFF0C;&#x53EF;&#x53C3;&#x8003;&#xFF1A;<a href="http://stackoverflow.com/questions/9961473/nm-vs-readelf-s" target="_blank">nm vs &#x201C;readelf -s&#x201D;</a>&#x3002;</p>
<p><span id="toc_23258_14315_6"></span></p>
<h3 id="%E5%8B%95%E6%85%8B%E9%8F%88%E6%8E%A5">&#x52D5;&#x614B;&#x93C8;&#x63A5;</h3>
<p>&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5C31;&#x662F;&#x5728;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x6642;&#x5C0D;&#x7B26;&#x865F;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#xFF0C;&#x78BA;&#x5B9A;&#x7B26;&#x865F;&#x5C0D;&#x61C9;&#x7684;&#x5167;&#x5B58;&#x5730;&#x5740;&#x7684;&#x904E;&#x7A0B;&#x3002;</p>
<p>Linux &#x4E0B;&#x7B26;&#x865F;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x9ED8;&#x8A8D;&#x63A1;&#x7528;<a href="http://elfhack.whitecell.org/mydocs/ELF_symbol_resolve_process1.txt" target="_blank">Lazy Mode&#x65B9;&#x5F0F;</a>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8AAA;&#x5728;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x904E;&#x7A0B;&#x4E2D;&#x7528;&#x5230;&#x8A72;&#x7B26;&#x865F;&#x6642;&#x624D;&#x53BB;&#x89E3;&#x6790;&#x5B83;&#x7684;&#x5730;&#x5740;&#x3002;&#x9019;&#x6A23;&#x4E00;&#x7A2E;&#x7B26;&#x865F;&#x89E3;&#x6790;&#x65B9;&#x5F0F;&#x6709;&#x4E00;&#x500B;&#x597D;&#x8655;&#xFF1A;&#x53EA;&#x89E3;&#x6790;&#x90A3;&#x4E9B;&#x7528;&#x5230;&#x7684;&#x7B26;&#x865F;&#xFF0C;&#x800C;&#x5C0D;&#x90A3;&#x4E9B;&#x4E0D;&#x7528;&#x7684;&#x7B26;&#x865F;&#x5247;&#x6C38;&#x9060;&#x4E0D;&#x7528;&#x89E3;&#x6790;&#xFF0C;&#x5F9E;&#x800C;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x7684;&#x57F7;&#x884C;&#x6548;&#x7387;&#x3002;</p>
<p>&#x4E0D;&#x904E;&#x9019;&#x7A2E;&#x9ED8;&#x8A8D;&#x662F;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x8A2D;&#x7F6E; <code>LD_BIND_NOW</code> &#x70BA;&#x975E;&#x7A7A;&#x4F86;&#x6253;&#x7834;&#x7684;&#xFF08;&#x4E0B;&#x9762;&#x6703;&#x901A;&#x904E;&#x5BE6;&#x4F8B;&#x4F86;&#x5206;&#x6790;&#x9019;&#x500B;&#x8B8A;&#x91CF;&#x7684;&#x4F5C;&#x7528;&#xFF09;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8AAA;&#x5982;&#x679C;&#x8A2D;&#x7F6E;&#x4E86;&#x9019;&#x500B;&#x8B8A;&#x91CF;&#xFF0C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x5C07;&#x5728;&#x7A0B;&#x5E8F;&#x52A0;&#x8F09;&#x5F8C;&#x548C;&#x7B26;&#x865F;&#x88AB;&#x4F7F;&#x7528;&#x4E4B;&#x524D;&#x5C31;&#x5C0D;&#x9019;&#x4E9B;&#x7B26;&#x865F;&#x7684;&#x5730;&#x5740;&#x9032;&#x884C;&#x89E3;&#x6790;&#x3002;</p>
<p><span id="toc_23258_14315_7"></span></p>
<h3 id="%E5%8B%95%E6%85%8B%E9%8F%88%E6%8E%A5%E5%BA%AB">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;</h3>
<p>&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x91CD;&#x5B9A;&#x4F4D;&#x7684;&#x904E;&#x7A0B;&#x5C31;&#x662F;&#x5C0D;&#x7B26;&#x865F;&#x5F15;&#x7528;&#x548C;&#x7B26;&#x865F;&#x5730;&#x5740;&#x9032;&#x884C;&#x93C8;&#x63A5;&#x7684;&#x904E;&#x7A0B;&#xFF0C;&#x800C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x904E;&#x7A0B;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x7B26;&#x865F;&#x5F15;&#x7528;&#x548C;&#x7B26;&#x865F;&#x5B9A;&#x7FA9;&#x5206;&#x5225;&#x5C0D;&#x61C9;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x548C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF0C;&#x5728;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x4E2D;&#x53EF;&#x80FD;&#x5F15;&#x7528;&#x4E86;&#x67D0;&#x4E9B;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x4E2D;&#x5B9A;&#x7FA9;&#x7684;&#x7B26;&#x865F;&#xFF0C;&#x9019;&#x985E;&#x7B26;&#x865F;&#x901A;&#x5E38;&#x662F;&#x51FD;&#x6578;&#x3002;</p>
<p>&#x70BA;&#x4E86;&#x8B93;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x80FD;&#x5920;&#x9032;&#x884C;&#x7B26;&#x865F;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#xFF0C;&#x5FC5;&#x9808;&#x628A;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x76F8;&#x95DC;&#x4FE1;&#x606F;&#x5BEB;&#x5165;&#x5230;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x7576;&#x4E2D;&#xFF0C;&#x9019;&#x4E9B;&#x4FE1;&#x606F;&#x662F;&#x4EC0;&#x9EBC;&#x5462;&#xFF1F;</p>
<pre><code>$ readelf -d test | grep NEEDED
 0x00000001 (NEEDED)                     Shared library: [libc.so.6]
</code></pre><p><code>ELF</code> &#x6587;&#x4EF6;&#x6709;&#x4E00;&#x500B;&#x7279;&#x5225;&#x7684;&#x7BC0;&#x5340;&#xFF1A; <code>.dynamic</code>&#xFF0C;&#x5B83;&#x5B58;&#x653E;&#x4E86;&#x548C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x76F8;&#x95DC;&#x7684;&#x5F88;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x901A;&#x904E;&#x5B83;&#x627E;&#x5230;&#x8A72;&#x6587;&#x4EF6;&#x4F7F;&#x7528;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x3002;&#x4E0D;&#x904E;&#xFF0C;&#x8A72;&#x4FE1;&#x606F;&#x4E26;&#x672A;&#x5305;&#x542B;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB; <code>libc.so.6</code> &#x7684;&#x7D55;&#x5C0D;&#x8DEF;&#x5F91;&#xFF0C;&#x90A3;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x53BB;&#x54EA;&#x88E1;&#x67E5;&#x627E;&#x76F8;&#x61C9;&#x7684;&#x5EAB;&#x5462;&#xFF1F;</p>
<p>&#x901A;&#x904E; <code>LD_LIBRARY_PATH</code> &#x53C3;&#x6578;&#xFF0C;&#x5B83;&#x985E;&#x4F3C; Shell &#x89E3;&#x91CB;&#x5668;&#x4E2D;&#x7528;&#x65BC;&#x67E5;&#x627E;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x7684; <code>PATH</code> &#x74B0;&#x5883;&#x8B8A;&#x91CF;&#xFF0C;&#x4E5F;&#x662F;&#x901A;&#x904E;&#x5192;&#x865F;&#x5206;&#x958B;&#x6307;&#x5B9A;&#x4E86;&#x5404;&#x500B;&#x5B58;&#x653E;&#x5EAB;&#x51FD;&#x6578;&#x7684;&#x8DEF;&#x5F91;&#x3002;&#x8A72;&#x8B8A;&#x91CF;&#x5BE6;&#x969B;&#x4E0A;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x904E; <code>/etc/ld.so.conf</code> &#x6587;&#x4EF6;&#x4F86;&#x6307;&#x5B9A;&#xFF0C;&#x4E00;&#x884C;&#x5C0D;&#x61C9;&#x4E00;&#x500B;&#x8DEF;&#x5F91;&#x540D;&#x3002;&#x70BA;&#x4E86;&#x63D0;&#x9AD8;&#x67E5;&#x627E;&#x548C;&#x52A0;&#x8F09;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x7CFB;&#x7D71;&#x555F;&#x52D5;&#x5F8C;&#x6703;&#x901A;&#x904E; <code>ldconfig</code> &#x5DE5;&#x5177;&#x5275;&#x5EFA;&#x4E00;&#x500B;&#x5EAB;&#x7684;&#x7DE9;&#x5B58; <code>/etc/ld.so.cache</code> &#x3002;&#x5982;&#x679C;&#x7528;&#x6236;&#x901A;&#x904E; <code>/etc/ld.so.conf</code> &#x52A0;&#x5165;&#x4E86;&#x65B0;&#x7684;&#x5EAB;&#x641C;&#x7D22;&#x8DEF;&#x5F91;&#x6216;&#x8005;&#x662F;&#x628A;&#x65B0;&#x5EAB;&#x52A0;&#x5230;&#x67D0;&#x500B;&#x539F;&#x6709;&#x7684;&#x5EAB;&#x76EE;&#x9304;&#x4E0B;&#xFF0C;&#x6700;&#x597D;&#x662F;&#x57F7;&#x884C;&#x4E00;&#x4E0B; <code>ldconfig</code> &#x4EE5;&#x4FBF;&#x5237;&#x65B0;&#x7DE9;&#x5B58;&#x3002;</p>
<p>&#x9700;&#x8981;&#x88DC;&#x5145;&#x7684;&#x662F;&#xFF0C;&#x56E0;&#x70BA;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x672C;&#x8EAB;&#x9084;&#x53EF;&#x80FD;&#x5F15;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x5EAB;&#xFF0C;&#x90A3;&#x9EBC;&#x4E00;&#x500B;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x52D5;&#x614B;&#x7B26;&#x865F;&#x93C8;&#x63A5;&#x904E;&#x7A0B;&#x53EF;&#x80FD;&#x6D89;&#x53CA;&#x5230;&#x591A;&#x500B;&#x5EAB;&#xFF0C;&#x901A;&#x904E; <code>readelf -d</code> &#x53EF;&#x4EE5;&#x6253;&#x5370;&#x51FA;&#x8A72;&#x6587;&#x4EF6;&#x76F4;&#x63A5;&#x4F9D;&#x8CF4;&#x7684;&#x5EAB;&#xFF0C;&#x800C;&#x901A;&#x904E; <code>ldd</code> &#x547D;&#x4EE4;&#x5247;&#x53EF;&#x4EE5;&#x6253;&#x5370;&#x51FA;&#x6240;&#x6709;&#x4F9D;&#x8CF4;&#x6216;&#x8005;&#x9593;&#x63A5;&#x4F9D;&#x8CF4;&#x7684;&#x5EAB;&#x3002;</p>
<pre><code>$ ldd test
        linux-gate.so.1 =&gt;  (0xffffe000)
        libc.so.6 =&gt; /lib/libc.so.6 (0xb7da2000)
        /lib/ld-linux.so.2 (0xb7efc000)
</code></pre><p><code>libc.so.6</code> &#x901A;&#x904E; <code>readelf -d</code> &#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x662F;&#x76F4;&#x63A5;&#x4F9D;&#x8CF4;&#x7684;&#x5EAB;&#xFF1B;&#x800C; <code>linux-gate.so.1</code> &#x5728;&#x6587;&#x4EF6;&#x7CFB;&#x7D71;&#x4E2D;&#x4E26;&#x6C92;&#x6709;&#x5C0D;&#x61C9;&#x7684;&#x5EAB;&#x6587;&#x4EF6;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x500B;&#x865B;&#x64EC;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF0C;&#x5C0D;&#x61C9;&#x9032;&#x7A0B;&#x5167;&#x5B58;&#x6620;&#x50CF;&#x7684;&#x5167;&#x6838;&#x90E8;&#x5206;&#xFF0C;&#x66F4;&#x591A;&#x7D30;&#x7BC0;&#x8ACB;&#x53C3;&#x8003;&#x8CC7;&#x6599;<a href="http://www.linux010.cn/program/Linux-gateso1-DeHanYi-pcee6103.htm" target="_blank">[11]</a>; &#x800C; <code>/lib/ld-linux.so.2</code> &#x6B63;&#x597D;&#x662F;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#xFF0C;&#x7CFB;&#x7D71;&#x9700;&#x8981;&#x7528;&#x5B83;&#x4F86;&#x9032;&#x884C;&#x7B26;&#x865F;&#x91CD;&#x5B9A;&#x4F4D;&#x3002;&#x90A3; <code>ldd</code> &#x662F;&#x600E;&#x9EBC;&#x77E5;&#x9053; <code>/lib/ld-linux.so</code> &#x5C31;&#x662F;&#x8A72;&#x6587;&#x4EF6;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x5462;&#xFF1F;</p>
<p>&#x90A3;&#x662F;&#x56E0;&#x70BA; <code>ELF</code> &#x6587;&#x4EF6;&#x901A;&#x904E;&#x5C08;&#x9580;&#x7684;&#x7BC0;&#x5340;&#x6307;&#x5B9A;&#x4E86;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#xFF0C;&#x9019;&#x500B;&#x7BC0;&#x5340;&#x5C31;&#x662F; <code>.interp</code> &#x3002;</p>
<pre><code>$ readelf -x .interp test

Hex dump of section &apos;.interp&apos;:
  0x08048114 2f6c6962 2f6c642d 6c696e75 782e736f /lib/ld-linux.so
  0x08048124 2e3200                              .2.
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x9019;&#x500B;&#x7BC0;&#x5340;&#x525B;&#x597D;&#x6709;&#x5B57;&#x7B26;&#x4E32; <code>/lib/ld-linux.so.2</code>&#xFF0C;&#x5373; <code>ld-linux.so</code> &#x7684;&#x7D55;&#x5C0D;&#x8DEF;&#x5F91;&#x3002;</p>
<p>&#x6211;&#x5011;&#x767C;&#x73FE;&#xFF0C;&#x8207; <code>libc.so</code> &#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;<code>ld-linux.so</code> &#x7684;&#x8DEF;&#x5F91;&#x662F;&#x7D55;&#x5C0D;&#x8DEF;&#x5F91;&#xFF0C;&#x800C; <code>libc.so</code> &#x50C5;&#x50C5;&#x5305;&#x542B;&#x4E86;&#x6587;&#x4EF6;&#x540D;&#x3002;&#x539F;&#x56E0;&#x662F;&#xFF1A;&#x7A0B;&#x5E8F;&#x88AB;&#x57F7;&#x884C;&#x6642;&#xFF0C;<code>ld-linux.so</code> &#x5C07;&#x6700;&#x5148;&#x88AB;&#x88DD;&#x8F09;&#x5230;&#x5167;&#x5B58;&#x4E2D;&#xFF0C;&#x6C92;&#x6709;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;&#x77E5;&#x9053;&#x53BB;&#x54EA;&#x88E1;&#x67E5;&#x627E; <code>ld-linux.so</code>&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x7684;&#x8DEF;&#x5F91;&#x5FC5;&#x9808;&#x662F;&#x7D55;&#x5C0D;&#x7684;&#xFF1B;&#x7576; <code>ld-linux.so</code> &#x88AB;&#x88DD;&#x8F09;&#x4EE5;&#x5F8C;&#xFF0C;&#x7531;&#x5B83;&#x4F86;&#x53BB;&#x88DD;&#x8F09;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x548C;&#x76F8;&#x95DC;&#x7684;&#x5171;&#x4EAB;&#x5EAB;&#xFF0C;&#x5B83;&#x5C07;&#x6839;&#x64DA; <code>PATH</code> &#x8B8A;&#x91CF;&#x548C; <code>LD_LIBRARY_PATH</code> &#x8B8A;&#x91CF;&#x53BB;&#x78C1;&#x76E4;&#x4E0A;&#x67E5;&#x627E;&#x5B83;&#x5011;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x548C;&#x5171;&#x4EAB;&#x5EAB;&#x90FD;&#x53EF;&#x4EE5;&#x4E0D;&#x6307;&#x5B9A;&#x7D55;&#x5C0D;&#x8DEF;&#x5F91;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x8457;&#x91CD;&#x4ECB;&#x7D39;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x672C;&#x8EAB;&#x3002;</p>
<p><span id="toc_23258_14315_8"></span></p>
<h3 id="%E5%8B%95%E6%85%8B%E9%8F%88%E6%8E%A5%E5%99%A8%EF%BC%88dynamic-linker-loader%EF%BC%89">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#xFF08;dynamic linker/loader&#xFF09;</h3>
<p>Linux &#x4E0B; <code>elf</code> &#x6587;&#x4EF6;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x662F; <code>ld-linux.so</code>&#xFF0C;&#x5373; <code>/lib/ld-linux.so.2</code> &#x3002;&#x5F9E;&#x540D;&#x5B57;&#x4F86;&#x770B;&#x548C;&#x975C;&#x614B;&#x93C8;&#x63A5;&#x5668; <code>ld</code> &#xFF08;<code>gcc</code> &#x9ED8;&#x8A8D;&#x4F7F;&#x7528;&#x7684;&#x93C8;&#x63A5;&#x5668;&#xFF0C;&#x898B;&#x53C3;&#x8003;&#x8CC7;&#x6599;<a href="http://isomerica.net/archives/2007/05/28/what-is-linux-gateso1-and-why-is-it-missing-on-x86-64/" target="_blank">[10]</a>&#xFF09;&#x985E;&#x4F3C;&#x3002;&#x901A;&#x904E; <code>man ld-linux</code> &#x53EF;&#x4EE5;&#x7372;&#x53D6;&#x8207;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x76F8;&#x95DC;&#x7684;&#x8CC7;&#x6599;&#xFF0C;&#x5305;&#x62EC;&#x5404;&#x7A2E;&#x76F8;&#x95DC;&#x7684;&#x74B0;&#x5883;&#x8B8A;&#x91CF;&#x548C;&#x6587;&#x4EF6;&#x90FD;&#x6709;&#x8A73;&#x7D30;&#x7684;&#x8AAA;&#x660E;&#x3002;</p>
<p>&#x5C0D;&#x65BC;&#x74B0;&#x5883;&#x8B8A;&#x91CF;&#xFF0C;&#x9664;&#x4E86;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x904E;&#x7684; <code>LD_LIBRARY_PATH</code> &#x548C; <code>LD_BIND_NOW</code> &#x8B8A;&#x91CF;&#x5916;&#xFF0C;&#x9084;&#x6709;&#x5176;&#x4ED6;&#x5E7E;&#x500B;&#x91CD;&#x8981;&#x53C3;&#x6578;&#xFF0C;&#x6BD4;&#x5982; <code>LD_PRELOAD</code> &#x7528;&#x65BC;&#x6307;&#x5B9A;&#x9810;&#x88DD;&#x8F09;&#x4E00;&#x4E9B;&#x5EAB;&#xFF0C;&#x4EE5;&#x4FBF;&#x66FF;&#x63DB;&#x5176;&#x4ED6;&#x5EAB;&#x4E2D;&#x7684;&#x51FD;&#x6578;&#xFF0C;&#x5F9E;&#x800C;&#x505A;&#x4E00;&#x4E9B;&#x5B89;&#x5168;&#x65B9;&#x9762;&#x7684;&#x8655;&#x7406; <a href="http://fanqiang.chinaunix.net/safe/system/2007-02-01/4870.shtml" target="_blank">[6]</a>&#xFF0C;<a href="http://www.trilithium.com/johan/2005/08/linux-gate/" target="_blank">[9]</a>&#xFF0C;<a href="http://www.ibm.com/developerworks/cn/linux/l-overflow/index.html" target="_blank">[12]</a>&#xFF0C;&#x800C;&#x74B0;&#x5883;&#x8B8A;&#x91CF; <code>LD_DEBUG</code> &#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x9032;&#x884C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7684;&#x76F8;&#x95DC;&#x8ABF;&#x8A66;&#x3002;</p>
<p>&#x5C0D;&#x65BC;&#x6587;&#x4EF6;&#xFF0C;&#x9664;&#x4E86;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684; <code>ld.so.conf</code> &#x548C; <code>ld.so.cache</code> &#x5916;&#xFF0C;&#x9084;&#x6709;&#x4E00;&#x500B;&#x6587;&#x4EF6; <code>/etc/ld.so.preload</code> &#x7528;&#x65BC;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x9810;&#x88DD;&#x8F09;&#x7684;&#x5EAB;&#x3002;</p>
<p>&#x5F9E;&#x4E0A;&#x4E00;&#x5C0F;&#x7BC0;&#x4E2D;&#x767C;&#x73FE;&#x6709;&#x4E00;&#x500B;&#x5C08;&#x9580;&#x7684;&#x7BC0;&#x5340; <code>.interp</code> &#x5B58;&#x653E;&#x6709;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#xFF0C;&#x4F46;&#x662F;&#x9019;&#x500B;&#x7BC0;&#x5340;&#x70BA;&#x4EC0;&#x9EBC;&#x53EB;&#x505A; <code>.interp</code> &#xFF08;<code>interpeter</code>&#xFF09;<code>&#x5462;&#xFF1F;&#x56E0;&#x70BA;&#x7576; Shell &#x89E3;&#x91CB;&#x5668;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x7236;&#x9032;&#x7A0B;&#x901A;&#x904E;</code>exec<code>&#x555F;&#x52D5;&#x6211;&#x5011;&#x7684;&#x7A0B;&#x5E8F;&#x6642;&#xFF0C;&#x7CFB;&#x7D71;&#x6703;&#x5148;&#x70BA;</code>ld-linux<code>&#x5275;&#x5EFA;&#x5167;&#x5B58;&#x6620;&#x50CF;&#xFF0C;&#x7136;&#x5F8C;&#x628A;&#x63A7;&#x5236;&#x6B0A;&#x4EA4;&#x7D66;</code>ld-linux<code>&#xFF0C;&#x4E4B;&#x5F8C;</code>ld-linux<code>&#x8CA0;&#x8CAC;&#x70BA;&#x53EF;&#x57F7;&#x884C;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x904B;&#x884C;&#x74B0;&#x5883;&#xFF0C;&#x8CA0;&#x8CAC;&#x89E3;&#x91CB;&#x7A0B;&#x5E8F;&#x7684;&#x904B;&#x884C;&#xFF0C;&#x56E0;&#x6B64;</code>ld-linux<code>&#x4E5F;&#x53EB;&#x505A;</code>dynamic loader<code>&#xFF08;&#x6216;</code>intepreter`&#xFF09;&#xFF08;&#x95DC;&#x65BC;&#x7A0B;&#x5E8F;&#x7684;&#x52A0;&#x8F09;&#x904E;&#x7A0B;&#x8ACB;&#x53C3;&#x8003;&#x8CC7;&#x6599; <a href="http://www.ibm.com/developerworks/cn/linux/l-elf/part1/index.html" target="_blank">[13]</a>&#xFF09;</p>
<p>&#x90A3;&#x9EBC;&#x5728; <code>exec</code> &#xFF08;&#xFF09;&#x4E4B;&#x5F8C;&#x548C;&#x7A0B;&#x5E8F;&#x6307;&#x4EE4;&#x904B;&#x884C;&#x4E4B;&#x524D;&#x7684;&#x904E;&#x7A0B;&#x662F;&#x600E;&#x6A23;&#x7684;&#x5462;&#xFF1F; <code>ld-linux.so</code> &#x4E3B;&#x8981;&#x70BA;&#x7A0B;&#x5E8F;&#x672C;&#x8EAB;&#x5275;&#x5EFA;&#x4E86;&#x5167;&#x5B58;&#x6620;&#x50CF;&#xFF08;&#x4EE5;&#x4E0B;&#x5167;&#x5BB9;&#x6458;&#x81EA;&#x8CC7;&#x6599; <a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[8]</a>&#xFF09;&#xFF0C;&#x5927;&#x9AD4;&#x904E;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x5C07;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x5167;&#x5B58;&#x6BB5;&#x6DFB;&#x52A0;&#x5230;&#x9032;&#x7A0B;&#x6620;&#x50CF;&#x4E2D;&#xFF1B;</li>
<li>&#x628A;&#x5171;&#x4EAB;&#x76EE;&#x6A19;&#x5167;&#x5B58;&#x6BB5;&#x6DFB;&#x52A0;&#x5230;&#x9032;&#x7A0B;&#x6620;&#x50CF;&#x4E2D;&#xFF1B;</li>
<li>&#x70BA;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x548C;&#x5B83;&#x7684;&#x5171;&#x4EAB;&#x76EE;&#x6A19;&#xFF08;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#xFF09;&#x57F7;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#x64CD;&#x4F5C;&#xFF1B;</li>
<li>&#x95DC;&#x9589;&#x7528;&#x4F86;&#x8B80;&#x5165;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#xFF0C;&#x5982;&#x679C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7A0B;&#x5E8F;&#x6536;&#x5230;&#x904E;&#x9019;&#x6A23;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x8A71;&#xFF1B;</li>
<li>&#x5C07;&#x63A7;&#x5236;&#x8F49;&#x4EA4;&#x7D66;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F7F;&#x5F97;&#x7A0B;&#x5E8F;&#x597D;&#x50CF;&#x5F9E; <code>exec()</code> &#x76F4;&#x63A5;&#x5F97;&#x5230;&#x63A7;&#x5236;</li>
</ul>
<p>&#x95DC;&#x65BC;&#x7B2C; 1 &#x6B65;&#xFF0C;&#x5728; <code>ELF</code> &#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x982D;&#x4E2D;&#x5C31;&#x6307;&#x5B9A;&#x4E86;&#x8A72;&#x6587;&#x4EF6;&#x7684;&#x5165;&#x53E3;&#x5730;&#x5740;&#xFF0C;&#x7A0B;&#x5E8F;&#x7684;&#x4EE3;&#x78BC;&#x548C;&#x6578;&#x64DA;&#x90E8;&#x5206;&#x6703;&#x76F8;&#x7E7C; <code>map</code> &#x5230;&#x5C0D;&#x61C9;&#x7684;&#x5167;&#x5B58;&#x4E2D;&#x3002;&#x800C;&#x95DC;&#x65BC;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x7684;&#x8DEF;&#x5F91;&#xFF0C;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86; <code>PATH</code> &#x74B0;&#x5883;&#x8B8A;&#x91CF;&#xFF0C;<code>ld-linux</code> &#x6703;&#x5230; <code>PATH</code> &#x6307;&#x5B9A;&#x7684;&#x76F8;&#x95DC;&#x76EE;&#x9304;&#x4E0B;&#x67E5;&#x627E;&#x3002;</p>
<pre><code>$ readelf -h test | grep Entry
  Entry point address:               0x80482b0
</code></pre><p>&#x5C0D;&#x65BC;&#x7B2C; 2 &#x6B65;&#xFF0C;&#x4E0A;&#x4E00;&#x7BC0;&#x63D0;&#x5230;&#x7684; <code>.dynamic</code> &#x7BC0;&#x5340;&#x6307;&#x5B9A;&#x4E86;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x4F9D;&#x8CF4;&#x7684;&#x5EAB;&#x540D;&#xFF0C;<code>ld-linux</code> &#xFF08;&#x5728;&#x9019;&#x88E1;&#x53EB;&#x505A;&#x52D5;&#x614B;&#x88DD;&#x8F09;&#x5668;&#x6216;&#x7A0B;&#x5E8F;&#x89E3;&#x91CB;&#x5668;&#x6BD4;&#x8F03;&#x5408;&#x9069;&#xFF09;&#x518D;&#x5F9E; <code>LD_LIBRARY_PATH</code> &#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F91;&#x4E2D;&#x627E;&#x5230;&#x76F8;&#x95DC;&#x7684;&#x5EAB;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x5F9E; <code>/etc/ld.so.cache</code> &#x5EAB;&#x7DE9;&#x885D;&#x4E2D;&#x52A0;&#x8F09;&#x76F8;&#x95DC;&#x5EAB;&#x5230;&#x5167;&#x5B58;&#x4E2D;&#x3002;&#xFF08;&#x95DC;&#x65BC;&#x9032;&#x7A0B;&#x7684;&#x5167;&#x5B58;&#x6620;&#x50CF;&#xFF0C;&#x63A8;&#x85A6;&#x53C3;&#x8003;&#x8CC7;&#x6599; <a href="http://www.ibm.com/developerworks/cn/linux/l-elf/part2/index.html" target="_blank">[14]</a>&#xFF09;</p>
<p>&#x5C0D;&#x65BC;&#x7B2C; 3 &#x6B65;&#xFF0C;&#x5728;&#x524D;&#x9762;&#x5DF2;&#x63D0;&#x5230;&#xFF0C;&#x5982;&#x679C;&#x8A2D;&#x7F6E;&#x4E86; <code>LD_BIND_NOW</code> &#x74B0;&#x5883;&#x8B8A;&#x91CF;&#xFF0C;&#x9019;&#x500B;&#x52D5;&#x4F5C;&#x5C31;&#x6703;&#x5728;&#x6B64;&#x6642;&#x767C;&#x751F;&#xFF0C;&#x5426;&#x5247;&#x5C07;&#x6703;&#x63A1;&#x7528; <code>lazy mode</code> &#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x7576;&#x67D0;&#x500B;&#x7B26;&#x865F;&#x88AB;&#x4F7F;&#x7528;&#x6642;&#x624D;&#x6703;&#x9032;&#x884C;&#x7B26;&#x865F;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#x3002;&#x4E0D;&#x904E;&#x7121;&#x8AD6;&#x5728;&#x4EC0;&#x9EBC;&#x6642;&#x5019;&#x767C;&#x751F;&#x9019;&#x500B;&#x52D5;&#x4F5C;&#xFF0C;&#x91CD;&#x5B9A;&#x4F4D;&#x7684;&#x904E;&#x7A0B;&#x5927;&#x9AD4;&#x662F;&#x4E00;&#x6A23;&#x7684;&#xFF08;&#x5728;&#x5F8C;&#x9762;&#x5C07;&#x4E3B;&#x8981;&#x4ECB;&#x7D39;&#x8A72;&#x904E;&#x7A0B;&#xFF09;&#x3002;</p>
<p>&#x5C0D;&#x65BC;&#x7B2C; 4 &#x6B65;&#xFF0C;&#x9019;&#x500B;&#x4E3B;&#x8981;&#x662F;&#x91CB;&#x653E;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x3002;</p>
<p>&#x5C0D;&#x65BC;&#x7B2C; 5 &#x6B65;&#xFF0C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x628A;&#x7A0B;&#x5E8F;&#x63A7;&#x5236;&#x6B0A;&#x4EA4;&#x9084;&#x7D66;&#x7A0B;&#x5E8F;&#x3002;</p>
<p>&#x73FE;&#x5728;&#x95DC;&#x5FC3;&#x7684;&#x4E3B;&#x8981;&#x662F;&#x7B2C; 3 &#x6B65;&#xFF0C;&#x5373;&#x5982;&#x4F55;&#x9032;&#x884C;&#x7B26;&#x865F;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#xFF1F;&#x4E0B;&#x9762;&#x4F86;&#x63A2;&#x6C42;&#x9019;&#x500B;&#x904E;&#x7A0B;&#x3002;&#x671F;&#x9593;&#x6703;&#x9010;&#x6B65;&#x8A0E;&#x8AD6;&#x5230;&#x548C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5BC6;&#x5207;&#x76F8;&#x95DC;&#x7684;&#x4E09;&#x500B;&#x6578;&#x64DA;&#x7D50;&#x69CB;&#xFF0C;&#x5B83;&#x5011;&#x5206;&#x5225;&#x662F; <code>ELF</code> &#x6587;&#x4EF6;&#x7684;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x3001;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x548C;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#xFF0C;&#x9019;&#x4E09;&#x500B;&#x8868;&#x90FD;&#x662F; <code>ELF</code> &#x6587;&#x4EF6;&#x7684;&#x7BC0;&#x5340;&#x3002;</p>
<p><span id="toc_23258_14315_9"></span></p>
<h3 id="%E9%81%8E%E7%A8%8B%E9%8F%88%E6%8E%A5%E8%A1%A8%EF%BC%88plt%EF%BC%89">&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#xFF08;plt&#xFF09;</h3>
<p>&#x5F9E;&#x4E0A;&#x9762;&#x7684;&#x6F14;&#x793A;&#x767C;&#x73FE;&#xFF0C;&#x9084;&#x6709;&#x4E00;&#x500B; <code>printf</code> &#x7B26;&#x865F;&#x7684;&#x5730;&#x5740;&#x6C92;&#x6709;&#x78BA;&#x5B9A;&#xFF0C;&#x5B83;&#x61C9;&#x8A72;&#x5728;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB; <code>libc.so</code> &#x4E2D;&#x5B9A;&#x7FA9;&#xFF0C;&#x9700;&#x8981;&#x9032;&#x884C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x3002;&#x9019;&#x88E1;&#x5047;&#x8A2D;&#x63A1;&#x7528; <code>lazy mode</code> &#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x57F7;&#x884C;&#x5230; <code>printf</code> &#x6240;&#x5728;&#x4F4D;&#x7F6E;&#x6642;&#x624D;&#x53BB;&#x89E3;&#x6790;&#x8A72;&#x7B26;&#x865F;&#x7684;&#x5730;&#x5740;&#x3002;</p>
<p>&#x5047;&#x8A2D;&#x7576;&#x524D;&#x5DF2;&#x7D93;&#x57F7;&#x884C;&#x5230;&#x4E86; <code>printf</code> &#x6240;&#x5728;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373; <code>call printf</code>&#xFF0C;&#x6211;&#x5011;&#x901A;&#x904E; <code>objdump</code> &#x53CD;&#x7DE8;&#x8B6F; <code>test</code> &#x7A0B;&#x5E8F;&#x7684;&#x6B63;&#x6587;&#x6BB5;&#x770B;&#x770B;&#x3002;</p>
<pre><code>$ objdump -d -s -j .text test | grep printf
 804837c:       e8 1f ff ff ff          call   80482a0 &lt;printf@plt&gt;
</code></pre><p>&#x767C;&#x73FE;&#xFF0C;&#x8A72;&#x5730;&#x5740;&#x6307;&#x5411;&#x4E86; <code>plt</code> &#xFF08;&#x5373;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#xFF09;&#x5373;&#x5730;&#x5740; <code>80482a0</code> &#x8655;&#x3002;&#x4E0B;&#x9762;&#x67E5;&#x770B;&#x8A72;&#x5730;&#x5740;&#x8655;&#x7684;&#x5167;&#x5BB9;&#x3002;</p>
<pre><code>$ objdump -D test | grep &quot;80482a0&quot; | grep -v call
080482a0 &lt;printf@plt&gt;:
 80482a0:       ff 25 8c 95 04 08       jmp    *0x804958c
</code></pre><p>&#x767C;&#x73FE; <code>80482a0</code> &#x5730;&#x5740;&#x5C0D;&#x61C9;&#x7684;&#x662F;&#x4E00;&#x689D;&#x8DF3;&#x8F49;&#x6307;&#x4EE4;&#xFF0C;&#x8DF3;&#x8F49;&#x5230; <code>0x804958c</code> &#x5730;&#x5740;&#x6307;&#x5411;&#x7684;&#x5730;&#x5740;&#x3002;&#x5230;&#x5E95; <code>0x804958c</code> &#x5730;&#x5740;&#x672C;&#x8EAB;&#x5728;&#x4EC0;&#x9EBC;&#x5730;&#x65B9;&#x5462;&#xFF1F;&#x6211;&#x5011;&#x80FD;&#x5426;&#x5F9E; <code>.dynamic</code> &#x7BC0;&#x5340;&#xFF08;&#x8A72;&#x7BC0;&#x5340;&#x5B58;&#x653E;&#x4E86;&#x548C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x76F8;&#x95DC;&#x7684;&#x6578;&#x64DA;&#xFF09;&#x7372;&#x53D6;&#x76F8;&#x95DC;&#x7684;&#x4FE1;&#x606F;&#x5462;&#xFF1F;</p>
<pre><code>$ readelf -d test

Dynamic section at offset 0x4ac contains 20 entries:
  Tag        Type                         Name/Value
 0x00000001 (NEEDED)                     Shared library: [libc.so.6]
 0x0000000c (INIT)                       0x8048258
 0x0000000d (FINI)                       0x8048454
 0x00000004 (HASH)                       0x8048148
 0x00000005 (STRTAB)                     0x80481c0
 0x00000006 (SYMTAB)                     0x8048170
 0x0000000a (STRSZ)                      76 (bytes)
 0x0000000b (SYMENT)                     16 (bytes)
 0x00000015 (DEBUG)                      0x0
 0x00000003 (PLTGOT)                     0x8049578
 0x00000002 (PLTRELSZ)                   24 (bytes)
 0x00000014 (PLTREL)                     REL
 0x00000017 (JMPREL)                     0x8048240
 0x00000011 (REL)                        0x8048238
 0x00000012 (RELSZ)                      8 (bytes)
 0x00000013 (RELENT)                     8 (bytes)
 0x6ffffffe (VERNEED)                    0x8048218
 0x6fffffff (VERNEEDNUM)                 1
 0x6ffffff0 (VERSYM)                     0x804820c
 0x00000000 (NULL)                       0x0
</code></pre><p>&#x767C;&#x73FE; <code>0x8049578</code> &#x5730;&#x5740;&#x548C; <code>0x804958c</code> &#x5730;&#x5740;&#x6BD4;&#x8F03;&#x8FD1;&#xFF0C;&#x901A;&#x904E;&#x8CC7;&#x6599; <a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[8]</a> &#x67E5;&#x5230;&#x524D;&#x8005;&#x6B63;&#x597D;&#x662F; <code>.got.plt</code> &#xFF08;&#x5373;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#xFF09;&#x5C0D;&#x61C9;&#x7684;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x7684;&#x5165;&#x53E3;&#x5730;&#x5740;&#x3002;&#x96E3;&#x9053; <code>0x804958c</code> &#x6B63;&#x597D;&#x4F4D;&#x65BC; <code>.got.plt</code> &#x7BC0;&#x5340;&#x4E2D;&#xFF1F;</p>
<p><span id="toc_23258_14315_10"></span></p>
<h3 id="%E5%85%A8%E5%B1%80%E5%81%8F%E7%A7%BB%E8%A1%A8%EF%BC%88got%EF%BC%89">&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#xFF08;got&#xFF09;</h3>
<p>&#x73FE;&#x5728;&#x9032;&#x5165;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x770B;&#x770B;&#xFF0C;</p>
<pre><code>$ readelf -x .got.plt test

Hex dump of section &apos;.got.plt&apos;:
  0x08049578 ac940408 00000000 00000000 86820408 ................
  0x08049588 96820408 a6820408                   ........
</code></pre><p>&#x5F9E;&#x4E0A;&#x8FF0;&#x7D50;&#x679C;&#x53EF;&#x4EE5;&#x770B;&#x51FA; <code>0x804958c</code> &#x5730;&#x5740;&#xFF08;&#x5373; <code>0x08049588+4</code>&#xFF09;&#x8655;&#x5B58;&#x653E;&#x7684;&#x662F; <code>a6820408</code>&#xFF0C;&#x8003;&#x616E;&#x5230;&#x6211;&#x7684;&#x5BE6;&#x9A57;&#x5E73;&#x81FA;&#x662F; <code>i386</code>&#xFF0C;&#x5B57;&#x7BC0;&#x9806;&#x5E8F;&#x662F; <code>little-endian</code> &#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5BE6;&#x969B;&#x6578;&#x503C;&#x61C9;&#x8A72;&#x662F; <code>080482a6</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8AAA; <code>*</code> &#xFF08;<code>0x804958c</code>&#xFF09;<code>&#x7684;&#x503C;&#x662F;</code>080482a6<code>&#xFF0C;&#x9019;&#x500B;&#x5730;&#x5740;&#x525B;&#x597D;&#x662F;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x7684;&#x6700;&#x5F8C;&#x4E00;&#x9805;</code>call 80482a0<a href="mailto:printf@plt" target="_blank">printf@plt</a><code>&#x4E2D;</code>80482a0<code>&#x5730;&#x5740;&#x5F80;&#x5F8C;&#x504F;&#x79FB;</code>6 <code>&#x500B;&#x5B57;&#x7BC0;&#xFF0C;&#x5BB9;&#x6613;&#x731C;&#x5230;&#x8A72;&#x5730;&#x5740;&#x61C9;&#x8A72;&#x5C31;&#x662F;</code>jmp` &#x6307;&#x4EE4;&#x7684;&#x5F8C;&#x4E00;&#x689D;&#x5730;&#x5740;&#x3002;</p>
<pre><code>$ objdump -d -d -s -j .plt test |  grep &quot;080482a0 &lt;printf@plt&gt;:&quot; -A 3
080482a0 &lt;printf@plt&gt;:
 80482a0:       ff 25 8c 95 04 08       jmp    *0x804958c
 80482a6:       68 10 00 00 00          push   $0x10
 80482ab:       e9 c0 ff ff ff          jmp    8048270 &lt;_init+0x18&gt;
</code></pre><p><code>80482a6</code> &#x5730;&#x5740;&#x6070;&#x5DE7;&#x662F;&#x4E00;&#x689D; <code>push</code> &#x6307;&#x4EE4;&#xFF0C;&#x96A8;&#x5F8C;&#x662F;&#x4E00;&#x689D; <code>jmp</code> &#x6307;&#x4EE4;&#xFF08;&#x66AB;&#x4E14;&#x4E0D;&#x7BA1; <code>push</code> &#x6307;&#x4EE4;&#x5165;&#x68E7;&#x7684;&#x5167;&#x5BB9;&#x6709;&#x4EC0;&#x9EBC;&#x610F;&#x7FA9;&#xFF09;&#xFF0C;&#x57F7;&#x884C;&#x5B8C; <code>push</code> &#x6307;&#x4EE4;&#x4E4B;&#x5F8C;&#xFF0C;&#x5C31;&#x6703;&#x8DF3;&#x8F49;&#x5230; <code>8048270</code> &#x5730;&#x5740;&#x8655;&#xFF0C;&#x4E0B;&#x9762;&#x770B;&#x770B; <code>8048270</code> &#x5730;&#x5740;&#x8655;&#x5230;&#x5E95;&#x6709;&#x54EA;&#x4E9B;&#x6307;&#x4EE4;&#x3002;</p>
<pre><code>$ objdump -d -d -s -j .plt test | grep -v &quot;jmp    8048270 &lt;_init+0x18&gt;&quot; | grep &quot;08048270&quot; -A 2
08048270 &lt;__gmon_start__@plt-0x10&gt;:
 8048270:       ff 35 7c 95 04 08       pushl  0x804957c
 8048276:       ff 25 80 95 04 08       jmp    *0x8049580
</code></pre><p>&#x540C;&#x6A23;&#x662F;&#x4E00;&#x689D;&#x5165;&#x68E7;&#x6307;&#x4EE4;&#x8DDF;&#x8457;&#x4E00;&#x689D;&#x8DF3;&#x8F49;&#x6307;&#x4EE4;&#x3002;&#x4E0D;&#x904E;&#x9019;&#x5169;&#x500B;&#x5730;&#x5740; <code>0x804957c</code> &#x548C; <code>0x8049580</code> &#x662F;&#x9023;&#x7E8C;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x90FD;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x525B;&#x597D;&#x90FD;&#x5728; <code>.got.plt</code> &#x8868;&#x88E1;&#x982D;&#xFF08;&#x5F9E;&#x4E0A;&#x9762;&#x6211;&#x5011;&#x5DF2;&#x7D93;&#x77E5;&#x9053; <code>.got.plt</code> &#x7684;&#x5165;&#x53E3;&#x662F; <code>0x08049578</code>&#xFF09;&#x3002;&#x9019;&#x6A23;&#x7684;&#x8A71;&#xFF0C;&#x6211;&#x5011;&#x5F97;&#x78BA;&#x8A8D;&#x9019;&#x5169;&#x500B;&#x5730;&#x5740;&#x5230;&#x5E95;&#x6709;&#x4EC0;&#x9EBC;&#x5167;&#x5BB9;&#x3002;</p>
<pre><code>$ readelf -x .got.plt test

Hex dump of section &apos;.got.plt&apos;:
  0x08049578 ac940408 00000000 00000000 86820408 ................
  0x08049588 96820408 a6820408                   ........
</code></pre><p>&#x4E0D;&#x904E;&#xFF0C;&#x907A;&#x61BE;&#x7684;&#x662F;&#x901A;&#x904E; <code>readelf</code> &#x67E5;&#x770B;&#x5230;&#x7684;&#x9019;&#x5169;&#x500B;&#x5730;&#x5740;&#x4FE1;&#x606F;&#x90FD;&#x662F; 0&#xFF0C;&#x5B83;&#x5011;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x9EBC;&#x5462;&#xFF1F;</p>
<p>&#x73FE;&#x5728;&#x53EA;&#x80FD;&#x6C42;&#x52A9;&#x53C3;&#x8003;&#x8CC7;&#x6599; <a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[8]</a>&#xFF0C;&#x8A72;&#x8CC7;&#x6599;&#x7684;&#x201C;3.8.5 &#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x201D;&#x90E8;&#x5206;&#x5728;&#x4ECB;&#x7D39;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x548C;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x76F8;&#x4E92;&#x5408;&#x4F5C;&#x89E3;&#x6790;&#x7B26;&#x865F;&#x7684;&#x904E;&#x7A0B;&#x4E2D;&#x7684;&#x4E09;&#x6B65;&#x6D89;&#x53CA;&#x5230;&#x4E86;&#x9019;&#x5169;&#x500B;&#x5730;&#x5740;&#x548C;&#x524D;&#x9762;&#x6C92;&#x6709;&#x8AAA;&#x660E;&#x7684; <code>push</code> $ <code>0x10</code> &#x6307;&#x4EE4;&#x3002;</p>
<ul>
<li>&#x5728;&#x7A0B;&#x5E8F;&#x7B2C;&#x4E00;&#x6B21;&#x5275;&#x5EFA;&#x5167;&#x5B58;&#x6620;&#x50CF;&#x6642;&#xFF0C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x70BA;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x7684;&#x7B2C;&#x4E8C;&#xFF08;<code>0x804957c</code>&#xFF09;&#x548C;&#x7B2C;&#x4E09;&#x9805;&#xFF08;<code>0x8049580</code>&#xFF09;&#x8A2D;&#x7F6E;&#x7279;&#x6B8A;&#x503C;&#x3002;</li>
<li>&#x539F;&#x6B65;&#x9A5F; 5&#x3002;&#x5728;&#x8DF3;&#x8F49;&#x5230; <code>08048270 &lt;__gmon_start__@plt-0x10&gt;</code>&#xFF0C;&#x5373;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x7684;&#x7B2C;&#x4E00;&#x9805;&#x4E4B;&#x524D;&#xFF0C;&#x6709;&#x4E00;&#x689D;&#x58D3;&#x5165;&#x68E7;&#x6307;&#x4EE4;&#xFF0C;&#x5373;<code>push $0x10</code>&#xFF0C;0x10&#x662F;&#x76F8;&#x5C0D;&#x65BC;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x8D77;&#x59CB;&#x5730;&#x5740;&#x7684;&#x4E00;&#x500B;&#x504F;&#x79FB;&#x5730;&#x5740;&#xFF0C;&#x9019;&#x500B;&#x504F;&#x79FB;&#x5730;&#x5740;&#x5230;&#x5E95;&#x6709;&#x4EC0;&#x9EBC;&#x7528;&#x5462;&#xFF1F;&#x5B83;&#x61C9;&#x8A72;&#x662F;&#x63D0;&#x4F9B;&#x7D66;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x7684;&#x4EC0;&#x9EBC;&#x4FE1;&#x606F;&#x5427;&#xFF1F;&#x5F8C;&#x9762;&#x518D;&#x8AAA;&#x660E;&#x3002;</li>
<li>&#x539F;&#x6B65;&#x9A5F; 6&#x3002;&#x8DF3;&#x8F49;&#x5230;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x7684;&#x7B2C;&#x4E00;&#x9805;&#x4E4B;&#x5F8C;&#xFF0C;&#x58D3;&#x5165;&#x4E86;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D;&#x7684;&#x7B2C;&#x4E8C;&#x9805;&#xFF08;&#x5373; <code>0x804957c</code> &#x8655;&#xFF09;&#xFF0C;&#x201C;&#x70BA;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x63D0;&#x4F9B;&#x4E86;&#x8B58;&#x5225;&#x4FE1;&#x606F;&#x7684;&#x6A5F;&#x6703;&#x201D;&#xFF08;&#x5177;&#x9AD4;&#x662F;&#x4EC0;&#x9EBC;&#x5462;&#xFF1F;&#x5F8C;&#x9762;&#x6703;&#x7C21;&#x55AE;&#x63D0;&#x5230;&#xFF0C;&#x4F46;&#x9019;&#x500B;&#x4E26;&#x4E0D;&#x662F;&#x5F88;&#x91CD;&#x8981;)&#xFF0C;&#x7136;&#x5F8C;&#x8DF3;&#x8F49;&#x5230;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x7684;&#x7B2C;&#x4E09;&#x9805;&#xFF08;<code>0x8049580</code>&#xFF0C;&#x9019;&#x4E00;&#x9805;&#x6BD4;&#x8F03;&#x91CD;&#x8981;&#xFF09;&#xFF0C;&#x628A;&#x63A7;&#x5236;&#x6B0A;&#x4EA4;&#x7D66;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x3002;</li>
</ul>
<p>&#x5F9E;&#x9019;&#x4E09;&#x6B65;&#x767C;&#x73FE;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x6642;&#x5730;&#x5740; <code>0x8049580</code> &#x8655;&#x5B58;&#x653E;&#x7684;&#x61C9;&#x8A72;&#x662F;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x7684;&#x5165;&#x53E3;&#x5730;&#x5740;&#xFF0C;&#x800C;&#x91CD;&#x5B9A;&#x4F4D;&#x8868; <code>0x10</code> &#x4F4D;&#x7F6E;&#x8655;&#x548C; <code>0x804957c</code> &#x8655;&#x61C9;&#x8A72;&#x70BA;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x63D0;&#x4F9B;&#x77AD;&#x89E3;&#x6790;&#x7B26;&#x865F;&#x9700;&#x8981;&#x7684;&#x67D0;&#x4E9B;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x5728;&#x7E7C;&#x7E8C;&#x4E4B;&#x524D;&#x5148;&#x7E3D;&#x7D50;&#x4E00;&#x4E0B;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x548C;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x3002;&#x4E0A;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x904E;&#x7A0B;&#x50C5;&#x50C5;&#x5F9E;&#x201C;&#x5C40;&#x90E8;&#x201D;&#x770B;&#x904E;&#x4E86;&#x9019;&#x5169;&#x500B;&#x8868;&#xFF0C;&#x4F46;&#x662F;&#x4E26;&#x6C92;&#x6709;&#x5B8F;&#x89C0;&#x5730;&#x770B;&#x88E1;&#x982D;&#x7684;&#x5167;&#x5BB9;&#x3002;&#x4E0B;&#x9762;&#x5C07;&#x5B8F;&#x89C0;&#x7684;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#xFF0C; &#x5C0D;&#x65BC;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#xFF1A;</p>
<pre><code>$ objdump -d -d -s -j .plt test
08048270 &lt;__gmon_start__@plt-0x10&gt;:
 8048270:       ff 35 7c 95 04 08       pushl  0x804957c
 8048276:       ff 25 80 95 04 08       jmp    *0x8049580
 804827c:       00 00                   add    %al,(%eax)
        ...

08048280 &lt;__gmon_start__@plt&gt;:
 8048280:       ff 25 84 95 04 08       jmp    *0x8049584
 8048286:       68 00 00 00 00          push   $0x0
 804828b:       e9 e0 ff ff ff          jmp    8048270 &lt;_init+0x18&gt;

08048290 &lt;__libc_start_main@plt&gt;:
 8048290:       ff 25 88 95 04 08       jmp    *0x8049588
 8048296:       68 08 00 00 00          push   $0x8
 804829b:       e9 d0 ff ff ff          jmp    8048270 &lt;_init+0x18&gt;

080482a0 &lt;printf@plt&gt;:
 80482a0:       ff 25 8c 95 04 08       jmp    *0x804958c
 80482a6:       68 10 00 00 00          push   $0x10
 80482ab:       e9 c0 ff ff ff          jmp    8048270 &lt;_init+0x18&gt;
</code></pre><p>&#x9664;&#x4E86;&#x8A72;&#x8868;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x9805;&#x5916;&#xFF0C;&#x5176;&#x4ED6;&#x5404;&#x9805;&#x5BE6;&#x969B;&#x4E0A;&#x662F;&#x985E;&#x4F3C;&#x7684;&#x3002;&#x800C;&#x6700;&#x5F8C;&#x4E00;&#x9805; <code>080482a0 &lt;printf@plt&gt;</code> &#x548C;&#x7B2C;&#x4E00;&#x9805;&#x6211;&#x5011;&#x90FD;&#x5206;&#x6790;&#x904E;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x96E3;&#x7406;&#x89E3;&#x5176;&#x4ED6;&#x5E7E;&#x9805;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x6C92;&#x6709;&#x8FA6;&#x6CD5;&#x55AE;&#x7368;&#x5DE5;&#x4F5C;&#xFF0C;&#x56E0;&#x70BA;&#x5B83;&#x548C;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x662F;&#x95DC;&#x806F;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8AAA;&#x660E;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x5F9E;&#x7E3D;&#x9AD4;&#x4E0A;&#x4F86;&#x770B;&#x4E00;&#x4E0B;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x3002;</p>
<pre><code>$ readelf -x .got.plt test

Hex dump of section &apos;.got.plt&apos;:
  0x08049578 ac940408 00000000 00000000 86820408 ................
  0x08049588 96820408 a6820408                   ........
</code></pre><p>&#x6BD4;&#x8F03;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D; <code>0x08049584</code> &#x8655;&#x958B;&#x59CB;&#x7684;&#x6578;&#x64DA;&#x548C;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x7B2C;&#x4E8C;&#x9805;&#x958B;&#x59CB;&#x7684;&#x9023;&#x7E8C;&#x4E09;&#x9805;&#x4E2D; <code>push</code> &#x6307;&#x5B9A;&#x6240;&#x5728;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x4E0D;&#x96E3;&#x767C;&#x73FE;&#xFF0C;&#x5B83;&#x5011;&#x662F;&#x5C0D;&#x61C9;&#x7684;&#x3002;&#x800C; <code>0x0804958c</code> &#x5373; <code>push 0x10</code> &#x5C0D;&#x61C9;&#x7684;&#x5730;&#x5740;&#x6211;&#x5011;&#x525B;&#x624D;&#x63D0;&#x5230;&#x904E;&#xFF08;&#x4E0B;&#x4E00;&#x7BC0;&#x6703;&#x9032;&#x4E00;&#x6B65;&#x5206;&#x6790;&#xFF09;&#xFF0C;&#x5176;&#x4ED6;&#x5E7E;&#x9805;&#x7684;&#x4F5C;&#x7528;&#x985E;&#x4F3C;&#xFF0C;&#x90FD;&#x662F;&#x8DF3;&#x56DE;&#x5230;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x7684; <code>push</code> &#x6307;&#x4EE4;&#x8655;&#xFF0C;&#x96A8;&#x5F8C;&#x5C31;&#x8DF3;&#x8F49;&#x5230;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x7684;&#x7B2C;&#x4E00;&#x9805;&#xFF0C;&#x4EE5;&#x4FBF;&#x89E3;&#x6790;&#x76F8;&#x61C9;&#x7684;&#x7B26;&#x865F;&#xFF08;&#x5BE6;&#x969B;&#x4E0A;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x7684;&#x7B2C;&#x4E00;&#x500B;&#x8868;&#x9805;&#x662F;&#x9032;&#x5165;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#xFF0C;&#x800C;&#x4E4B;&#x524D;&#x7684;&#x9023;&#x7E8C;&#x5169;&#x500B;&#x6307;&#x4EE4;&#x5247;&#x50B3;&#x9001;&#x4E86;&#x9700;&#x8981;&#x89E3;&#x6790;&#x7684;&#x7B26;&#x865F;&#x7B49;&#x4FE1;&#x606F;&#xFF09;&#x3002;&#x53E6;&#x5916; <code>0x08049578</code> &#x548C; <code>0x08049580</code> &#x8655;&#x5206;&#x5225;&#x5B58;&#x653E;&#x6709;&#x50B3;&#x905E;&#x7D66;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x76F8;&#x95DC;&#x4FE1;&#x606F;&#x548C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x672C;&#x8EAB;&#x7684;&#x5165;&#x53E3;&#x5730;&#x5740;&#x3002;&#x4F46;&#x662F;&#x9084;&#x6709;&#x4E00;&#x500B;&#x5730;&#x5740; <code>0x08049578</code>&#xFF0C;&#x9019;&#x500B;&#x5730;&#x5740;&#x525B;&#x597D;&#x662F; <code>.dynamic</code> &#x7684;&#x5165;&#x53E3;&#x5730;&#x5740;&#xFF0C;&#x8A72;&#x7BC0;&#x5340;&#x5B58;&#x653E;&#x4E86;&#x548C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x904E;&#x7A0B;&#x76F8;&#x95DC;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8CC7;&#x6599; <a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[8]</a> &#x63D0;&#x5230;&#x9019;&#x500B;&#x8868;&#x9805;&#x5BE6;&#x969B;&#x4E0A;&#x4FDD;&#x7559;&#x7D66;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x81EA;&#x5DF1;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x4E0D;&#x4F9D;&#x8CF4;&#x5176;&#x4ED6;&#x7A0B;&#x5E8F;&#x7684;&#x60C5;&#x6CC1;&#x4E0B;&#x5C0D;&#x81EA;&#x5DF1;&#x9032;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x5C07;&#x4E0D;&#x518D;&#x95DC;&#x6CE8;&#x8A72;&#x8868;&#x9805;&#x3002;</p>
<pre><code>$ objdump -D test | grep 080494ac
080494ac &lt;_DYNAMIC&gt;:
</code></pre><p><span id="toc_23258_14315_11"></span></p>
<h3 id="%E9%87%8D%E5%AE%9A%E4%BD%8D%E8%A1%A8">&#x91CD;&#x5B9A;&#x4F4D;&#x8868;</h3>
<p>&#x9019;&#x88E1;&#x4E3B;&#x8981;&#x63A5;&#x8457;&#x4E0A;&#x9762;&#x7684; <code>push 0x10</code> &#x6307;&#x4EE4;&#x4F86;&#x5206;&#x6790;&#x3002;&#x901A;&#x904E;&#x8CC7;&#x6599; <a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[8]</a> &#x767C;&#x73FE;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x5305;&#x542B;&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5176;&#x4ED6;&#x7BC0;&#x5340;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x4FBF;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x5C0D;&#x67D0;&#x4E9B;&#x7BC0;&#x5340;&#x5167;&#x7684;&#x7B26;&#x865F;&#x5730;&#x5740;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#xFF08;&#x4FEE;&#x6539;&#x70BA;&#x65B0;&#x7684;&#x5730;&#x5740;&#xFF09;&#x3002;&#x90A3;&#x5230;&#x5E95;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x9805;&#x63D0;&#x4F9B;&#x4E86;&#x4EC0;&#x9EBC;&#x6A23;&#x7684;&#x4FE1;&#x606F;&#x5462;&#xFF1F;</p>
<ul>
<li>&#x6BCF;&#x4E00;&#x500B;&#x91CD;&#x5B9A;&#x4F4D;&#x9805;&#x6709;&#x4E09;&#x90E8;&#x5206;&#x5167;&#x5BB9;&#xFF0C;&#x6211;&#x5011;&#x91CD;&#x9EDE;&#x95DC;&#x6CE8;&#x524D;&#x5169;&#x90E8;&#x5206;&#x3002;</li>
<li>&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x662F; <code>r_offset</code>&#xFF0C;&#x9019;&#x88E1;&#x8003;&#x616E;&#x7684;&#x662F;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x6839;&#x64DA;&#x8CC7;&#x6599;&#x767C;&#x73FE;&#xFF0C;&#x5B83;&#x7684;&#x53D6;&#x503C;&#x662F;&#x88AB;&#x91CD;&#x5B9A;&#x4F4D;&#x5F71;&#x97FF;&#xFF08;&#x53EF;&#x4EE5;&#x8AAA;&#x6539;&#x8B8A;&#x6216;&#x4FEE;&#x6539;&#xFF09;&#x5230;&#x7684;&#x5B58;&#x5132;&#x55AE;&#x5143;&#x7684;&#x865B;&#x64EC;&#x5730;&#x5740;&#x3002;</li>
<li>&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x662F; <code>r_info</code>&#xFF0C;&#x6B64;&#x6210;&#x54E1;&#x7D66;&#x51FA;&#x8981;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#x7684;&#x7B26;&#x865F;&#x8868;&#x7D22;&#x5F15;&#xFF08;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x9805;&#x5F15;&#x7528;&#x5230;&#x7684;&#x7B26;&#x865F;&#x8868;&#xFF09;&#xFF0C;&#x4EE5;&#x53CA;&#x5C07;&#x5BE6;&#x65BD;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#x985E;&#x578B;&#xFF08;&#x5982;&#x4F55;&#x9032;&#x884C;&#x7B26;&#x865F;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#xFF09;&#x3002;(Type)&#x3002;</li>
</ul>
<p>&#x5148;&#x4F86;&#x770B;&#x770B;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x7684;&#x5177;&#x9AD4;&#x5167;&#x5BB9;&#xFF0C;</p>
<pre><code>$ readelf -r test

Relocation section &apos;.rel.dyn&apos; at offset 0x238 contains 1 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
08049574  00000106 R_386_GLOB_DAT    00000000   __gmon_start__

Relocation section &apos;.rel.plt&apos; at offset 0x240 contains 3 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
08049584  00000107 R_386_JUMP_SLOT   00000000   __gmon_start__
08049588  00000207 R_386_JUMP_SLOT   00000000   __libc_start_main
0804958c  00000407 R_386_JUMP_SLOT   00000000   printf
</code></pre><p>&#x50C5;&#x50C5;&#x95DC;&#x6CE8;&#x548C;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x76F8;&#x95DC;&#x7684; <code>.rel.plt</code> &#x90E8;&#x5206;&#xFF0C;<code>0x10</code> &#x525B;&#x597D;&#x662F; <code>1*16+0*1</code>&#xFF0C;&#x5373; 16 &#x5B57;&#x7BC0;&#xFF0C;&#x4F5C;&#x70BA;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x7684;&#x504F;&#x79FB;&#xFF0C;&#x525B;&#x597D;&#x5C0D;&#x61C9;&#x8A72;&#x8868;&#x7684;&#x7B2C;&#x4E09;&#x884C;&#x3002;&#x767C;&#x73FE;&#x9019;&#x500B;&#x7D50;&#x679C;&#x4E2D;&#x7ADF;&#x7136;&#x5305;&#x542B;&#x4E86;&#x548C; <code>printf</code> &#x7B26;&#x865F;&#x76F8;&#x95DC;&#x7684;&#x5404;&#x7A2E;&#x4FE1;&#x606F;&#x3002;&#x4E0D;&#x904E;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x4E2D;&#x6C92;&#x6709;&#x76F4;&#x63A5;&#x6307;&#x5B9A;&#x7B26;&#x865F; <code>printf</code>&#xFF0C;&#x800C;&#x662F;&#x6839;&#x64DA; <code>r_info</code> &#x90E8;&#x5206;&#x5F9E;&#x52D5;&#x614B;&#x7B26;&#x865F;&#x8868;&#x4E2D;&#x8A08;&#x7B97;&#x51FA;&#x4F86;&#x7684;&#xFF0C;&#x6CE8;&#x610F;&#x89C0;&#x5BDF;&#x4E0A;&#x8FF0;&#x7D50;&#x679C;&#x4E2D;&#x7684; <code>Info</code> &#x4E00;&#x5217;&#x7684; 1&#xFF0C;2&#xFF0C;4 &#x548C;&#x4E0B;&#x9762;&#x7D50;&#x679C;&#x7684; <code>Num</code> &#x5217;&#x7684;&#x5C0D;&#x61C9;&#x95DC;&#x4FC2;&#x3002;</p>
<pre><code>$ readelf -s test | grep &quot;.dynsym&quot; -A 6
Symbol table &apos;.dynsym&apos; contains 5 entries:
   Num:    Value  Size Type    Bind   Vis      Ndx Name
     0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND
     1: 00000000     0 NOTYPE  WEAK   DEFAULT  UND __gmon_start__
     2: 00000000   410 FUNC    GLOBAL DEFAULT  UND __libc_start_main@GLIBC_2.0 (2)
     3: 08048474     4 OBJECT  GLOBAL DEFAULT   14 _IO_stdin_used
     4: 00000000    57 FUNC    GLOBAL DEFAULT  UND printf@GLIBC_2.0 (2)
</code></pre><p>&#x4E5F;&#x5C31;&#x662F;&#x8AAA;&#x5728;&#x57F7;&#x884C;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x9805;&#x7684;&#x8DF3;&#x8F49;&#x6307;&#x4EE4;&#xFF08;<code>jmp    *0x8049580</code>&#xFF09;&#x8ABF;&#x7528;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x4EE5;&#x5F8C;&#xFF0C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x56E0;&#x70BA;&#x6709;&#x4E86; <code>push 0x10</code>&#xFF0C;&#x5F9E;&#x800C;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x8A72;&#x91CD;&#x5B9A;&#x4F4D;&#x8868;&#x9805;&#x4E2D;&#x7684; <code>r_info</code> &#x627E;&#x5230;&#x5C0D;&#x61C9;&#x7B26;&#x865F;&#xFF08;<code>printf</code>&#xFF09;&#x5728;&#x7B26;&#x865F;&#x8868;&#xFF08;<code>.dynsym</code>&#xFF09;&#x4E2D;&#x7684;&#x76F8;&#x95DC;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x7B26;&#x865F;&#x8868;&#x4E2D;&#x9084;&#x6709; <code>Offset</code> &#xFF08;<code>r_offset</code>&#xFF09;<code>&#x4EE5;&#x53CA;</code>Type<code>&#x9019;&#x5169;&#x500B;&#x91CD;&#x8981;&#x4FE1;&#x606F;&#xFF0C;&#x524D;&#x8005;&#x8868;&#x793A;&#x8A72;&#x91CD;&#x5B9A;&#x4F4D;&#x64CD;&#x4F5C;&#x5F8C;&#x53EF;&#x80FD;&#x5F71;&#x97FF;&#x7684;&#x5730;&#x5740;</code>0804958c<code>&#xFF0C;&#x9019;&#x500B;&#x5730;&#x5740;&#x525B;&#x597D;&#x662F;</code>got<code>&#x8868;&#x9805;&#x7684;&#x6700;&#x5F8C;&#x4E00;&#x9805;&#xFF0C;&#x539F;&#x4F86;&#x5B58;&#x653E;&#x7684;&#x662F;</code>push 0x10<code>&#x6307;&#x4EE4;&#x7684;&#x5730;&#x5740;&#x3002;&#x9019;&#x610F;&#x5473;&#x8457;&#xFF0C;&#x8A72;&#x5730;&#x5740;&#x8655;&#x7684;&#x5167;&#x5BB9;&#x5C07;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x800C;&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5462;&#xFF1F;&#x6839;&#x64DA;</code>Type<code>&#x985E;&#x578B;</code>R_386_JUMP_SLOT`&#xFF0C;&#x901A;&#x904E;&#x8CC7;&#x6599; <a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">[8]</a> &#x67E5;&#x627E;&#x5230;&#x8A72;&#x985E;&#x578B;&#x5C0D;&#x61C9;&#x7684;&#x8AAA;&#x660E;&#x5982;&#x4E0B;&#xFF08;&#x539F;&#x8CC7;&#x6599;&#x6709;&#x8AA4;&#xFF0C;&#x4E0B;&#x9762;&#x505A;&#x4E86;&#x4FEE;&#x6539;&#xFF09;&#xFF1A;&#x93C8;&#x63A5;&#x7DE8;&#x8F2F;&#x5668;&#x5275;&#x5EFA;&#x9019;&#x7A2E;&#x91CD;&#x5B9A;&#x4F4D;&#x985E;&#x578B;&#x4E3B;&#x8981;&#x662F;&#x70BA;&#x4E86;&#x652F;&#x6301;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x3002;&#x5176;&#x504F;&#x79FB;&#x5730;&#x5740;&#x6210;&#x54E1;&#x7D66;&#x51FA;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#x9805;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x4FEE;&#x6539;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x9805;&#x7684;&#x5167;&#x5BB9;&#xFF0C;&#x628A;&#x63A7;&#x5236;&#x50B3;&#x8F38;&#x7D66;&#x6307;&#x5B9A;&#x7B26;&#x865F;&#x7684;&#x5730;&#x5740;&#x3002;</p>
<p>&#x9019;&#x8AAA;&#x660E;&#xFF0C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x5C07;&#x6839;&#x64DA;&#x8A72;&#x985E;&#x578B;&#x5C0D;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D;&#x7684;&#x6700;&#x6709;&#x4E00;&#x9805;&#xFF0C;&#x5373; <code>0804958c</code> &#x5730;&#x5740;&#x8655;&#x7684;&#x5167;&#x5BB9;&#x9032;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x4FEE;&#x6539;&#x70BA;&#x7B26;&#x865F;&#x7684;&#x5BE6;&#x969B;&#x5730;&#x5740;&#xFF0C;&#x5373; <code>printf</code> &#x51FD;&#x6578;&#x5728;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5167;&#x5B58;&#x6620;&#x50CF;&#x4E2D;&#x7684;&#x5730;&#x5740;&#x3002;</p>
<p>&#x5230;&#x9019;&#x88E1;&#xFF0C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7684;&#x5B8F;&#x89C0;&#x904E;&#x7A0B;&#x4F3C;&#x4E4E;&#x5DF2;&#x7D93;&#x77AD;&#x7136;&#x65BC;&#x5FC3;&#xFF0C;&#x4E0D;&#x904E;&#x4E00;&#x4E9B;&#x7D30;&#x7BC0;&#x9084;&#x662F;&#x4E0D;&#x592A;&#x6E05;&#x695A;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x5148;&#x4ECB;&#x7D39;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5275;&#x5EFA;&#xFF0C;&#x96B1;&#x5F0F;&#x8ABF;&#x7528;&#x548C;&#x986F;&#x793A;&#x8ABF;&#x7528;&#xFF0C;&#x63A5;&#x8457;&#x9032;&#x4E00;&#x6B65;&#x6F84;&#x6E05;&#x4E0A;&#x9762;&#x9084;&#x4E0D;&#x592A;&#x6E05;&#x695A;&#x7684;&#x7D30;&#x7BC0;&#xFF0C;&#x5373;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D;&#x7B2C;&#x4E8C;&#x9805;&#x5230;&#x5E95;&#x50B3;&#x905E;&#x7D66;&#x4E86;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x4EC0;&#x9EBC;&#x4FE1;&#x606F;&#xFF1F;&#x7B2C;&#x4E09;&#x9805;&#x662F;&#x5426;&#x5C31;&#x662F;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5668;&#x7684;&#x5730;&#x5740;&#xFF1F;&#x4E26;&#x8A0E;&#x8AD6;&#x901A;&#x904E;&#x8A2D;&#x7F6E; <code>LD_BIND_NOW</code> &#x800C;&#x4E0D;&#x63A1;&#x7528;&#x9ED8;&#x8A8D;&#x7684; lazy mode &#x9032;&#x884C;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x548C;&#x63A1;&#x7528; lazy mode &#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7684;&#x5340;&#x5225;&#xFF1F;</p>
<p><span id="toc_23258_14315_12"></span></p>
<h2 id="%E5%8B%95%E6%85%8B%E9%8F%88%E6%8E%A5%E5%BA%AB%E7%9A%84%E5%89%B5%E5%BB%BA%E5%92%8C%E8%AA%BF%E7%94%A8">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5275;&#x5EFA;&#x548C;&#x8ABF;&#x7528;</h2>
<p>&#x5728;&#x4ECB;&#x7D39;&#x52D5;&#x614B;&#x7B26;&#x865F;&#x93C8;&#x63A5;&#x7684;&#x66F4;&#x591A;&#x7D30;&#x7BC0;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x4F86;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5275;&#x5EFA;&#x548C;&#x5169;&#x7A2E;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF0C;&#x9032;&#x800C;&#x5F15;&#x51FA;&#x7B26;&#x865F;&#x89E3;&#x6790;&#x7684;&#x5F8C;&#x81FA;&#x7D30;&#x7BC0;&#x3002;</p>
<p><span id="toc_23258_14315_13"></span></p>
<h3 id="%E5%89%B5%E5%BB%BA%E5%8B%95%E6%85%8B%E9%8F%88%E6%8E%A5%E5%BA%AB">&#x5275;&#x5EFA;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;</h3>
<p>&#x9996;&#x5148;&#x4F86;&#x5275;&#x5EFA;&#x4E00;&#x500B;&#x7C21;&#x55AE;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x3002;</p>
<p>&#x4EE3;&#x78BC;&#xFF1A;</p>
<pre><code>/* myprintf.c */
#include &lt;stdio.h&gt;

int myprintf(char *str)
{
        printf(&quot;%s\n&quot;, str);
        return 0;
}
</code></pre><pre><code>/* myprintf.h */
#ifndef _MYPRINTF_H
#define _MYPRINTF_H

int myprintf(char *);

#endif
</code></pre><p>&#x6F14;&#x793A;&#xFF1A;</p>
<pre><code>$ gcc -c myprintf.c
$ gcc -shared -W1,-soname,libmyprintf.so.0 -o libmyprintf.so.0.0 myprintf.o
$ ln -sf libmyprintf.so.0.0 libmyprintf.so.0
$ ln -fs libmyprintf.so.0 libmyprintf.so
$ ls
libmyprintf.so  libmyprintf.so.0  libmyprintf.so.0.0  myprintf.c  myprintf.h  myprintf.o
</code></pre><p>&#x5F97;&#x5230;&#x4E09;&#x500B;&#x6587;&#x4EF6; <code>libmyprintf.so</code>&#xFF0C;<code>libmyprintf.so.0</code>&#xFF0C;<code>libmyprintf.so.0.0</code>&#xFF0C;&#x9019;&#x4E9B;&#x5EAB;&#x66AB;&#x4E14;&#x5B58;&#x653E;&#x5728;&#x7576;&#x524D;&#x76EE;&#x9304;&#x4E0B;&#x3002;&#x9019;&#x88E1;&#x6709;&#x4E00;&#x500B;&#x554F;&#x984C;&#x503C;&#x5F97;&#x95DC;&#x6CE8;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x70BA;&#x4EC0;&#x9EBC;&#x8981;&#x5275;&#x5EFA;&#x5169;&#x500B;&#x7B26;&#x865F;&#x93C8;&#x63A5;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x662F;&#x70BA;&#x4E86;&#x5728;&#x4E0D;&#x5F71;&#x97FF;&#x517C;&#x5BB9;&#x6027;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x5347;&#x7D1A;&#x5EAB; <a href="http://www.ibm.com/developerworks/linux/library/l-shlibs.html" target="_blank">[5]</a> &#x3002;</p>
<p><span id="toc_23258_14315_14"></span></p>
<h3 id="%E9%9A%B1%E5%BC%8F%E4%BD%BF%E7%94%A8%E8%A9%B2%E5%BA%AB">&#x96B1;&#x5F0F;&#x4F7F;&#x7528;&#x8A72;&#x5EAB;</h3>
<p>&#x73FE;&#x5728;&#x5BEB;&#x4E00;&#x6BB5;&#x4EE3;&#x78BC;&#x4F86;&#x4F7F;&#x7528;&#x8A72;&#x5EAB;&#xFF0C;&#x8ABF;&#x7528;&#x5176;&#x4E2D;&#x7684; <code>myprintf</code> &#x51FD;&#x6578;&#xFF0C;&#x9019;&#x88E1;&#x662F;&#x96B1;&#x5F0F;&#x4F7F;&#x7528;&#x8A72;&#x5EAB;&#xFF1A;&#x5728;&#x4EE3;&#x78BC;&#x4E2D;&#x4E26;&#x6C92;&#x6709;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x8A72;&#x5EAB;&#xFF0C;&#x800C;&#x662F;&#x901A;&#x904E;&#x8ABF;&#x7528; <code>myprintf</code> &#x96B1;&#x5F0F;&#x5730;&#x4F7F;&#x7528;&#x4E86;&#x8A72;&#x5EAB;&#xFF0C;&#x5728;&#x7DE8;&#x8B6F;&#x5F15;&#x7528;&#x8A72;&#x5EAB;&#x7684;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#x6642;&#x9700;&#x8981;&#x901A;&#x904E; <code>-l</code> &#x53C3;&#x6578;&#x6307;&#x5B9A;&#x8A72;&#x5EAB;&#x7684;&#x540D;&#x5B57;&#x3002;</p>
<pre><code>/* test.c */
#include &lt;stdio.h&gt;   
#include &lt;myprintf.h&gt;

int main()
{
        myprintf(&quot;Hello World&quot;);

        return 0;
}
</code></pre><p>&#x7DE8;&#x8B6F;&#xFF1A;</p>
<pre><code>$ gcc -o test test.c -lmyprintf -L./ -I./
</code></pre><p>&#x76F4;&#x63A5;&#x904B;&#x884C; <code>test</code>&#xFF0C;&#x63D0;&#x793A;&#x627E;&#x4E0D;&#x5230;&#x8A72;&#x5EAB;&#xFF0C;&#x56E0;&#x70BA;&#x5EAB;&#x7684;&#x9ED8;&#x8A8D;&#x641C;&#x7D22;&#x8DEF;&#x5F91;&#x88E1;&#x982D;&#x6C92;&#x6709;&#x5305;&#x542B;&#x7576;&#x524D;&#x76EE;&#x9304;&#xFF1A;</p>
<pre><code>$ ./test
./test: error while loading shared libraries: libmyprintf.so: cannot open shared object file: No such file or directory
</code></pre><p>&#x5982;&#x679C;&#x6307;&#x5B9A;&#x5EAB;&#x7684;&#x641C;&#x7D22;&#x8DEF;&#x5F91;&#xFF0C;&#x5247;&#x53EF;&#x4EE5;&#x904B;&#x884C;&#xFF1A;</p>
<pre><code>$ LD_LIBRARY_PATH=$PWD ./test
Hello World
</code></pre><p><span id="toc_23258_14315_15"></span></p>
<h3 id="%E9%A1%AF%E5%BC%8F%E4%BD%BF%E7%94%A8%E5%BA%AB">&#x986F;&#x5F0F;&#x4F7F;&#x7528;&#x5EAB;</h3>
<p><code>LD_LIBRARY_PATH</code> &#x74B0;&#x5883;&#x8B8A;&#x91CF;&#x4F7F;&#x5F97;&#x5EAB;&#x53EF;&#x4EE5;&#x653E;&#x5230;&#x67D0;&#x4E9B;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F91;&#x4E0B;&#x9762;&#xFF0C;&#x800C;&#x7121;&#x9808;&#x5728;&#x8ABF;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x986F;&#x5F0F;&#x7684;&#x6307;&#x5B9A;&#x8A72;&#x5EAB;&#x7684;&#x7D55;&#x5C0D;&#x8DEF;&#x5F91;&#xFF0C;&#x9019;&#x6A23;&#x907F;&#x514D;&#x4E86;&#x628A;&#x7A0B;&#x5E8F;&#x9650;&#x5236;&#x5728;&#x67D0;&#x4E9B;&#x7D55;&#x5C0D;&#x8DEF;&#x5F91;&#x4E0B;&#xFF0C;&#x65B9;&#x4FBF;&#x5EAB;&#x7684;&#x79FB;&#x52D5;&#x3002;</p>
<p>&#x96D6;&#x7136;&#x986F;&#x5F0F;&#x8ABF;&#x7528;&#x6709;&#x4E0D;&#x4FBF;&#xFF0C;&#x4F46;&#x662F;&#x80FD;&#x5920;&#x907F;&#x514D;&#x96B1;&#x5F0F;&#x8ABF;&#x7528;&#x641C;&#x7D22;&#x8DEF;&#x5F91;&#x7684;&#x6642;&#x9593;&#x6D88;&#x8017;&#xFF0C;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x986F;&#x5F0F;&#x8ABF;&#x7528;&#x70BA;&#x6211;&#x5011;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7D44;&#x51FD;&#x6578;&#x8ABF;&#x7528;&#xFF0C;&#x8B93;&#x7B26;&#x865F;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#x904E;&#x7A0B;&#x4E00;&#x89BD;&#x7121;&#x907A;&#x3002;</p>
<pre><code>/* test1.c */

#include &lt;dlfcn.h&gt;      /* dlopen, dlsym, dlerror */
#include &lt;stdlib.h&gt;     /* exit */
#include &lt;stdio.h&gt;      /* printf */

#define LIB_SO_NAME     &quot;./libmyprintf.so&quot;
#define FUNC_NAME &quot;myprintf&quot;

typedef int (*func)(char *);

int main(void)
{
        void *h;
        char *e;
        func f;

        h = dlopen(LIB_SO_NAME, RTLD_LAZY);
        if ( !h ) {
                printf(&quot;failed load libary: %s\n&quot;, LIB_SO_NAME);
                exit(-1);
        }
        f = dlsym(h, FUNC_NAME);
        e = dlerror();
        if (e != NULL) {
                printf(&quot;search %s error: %s\n&quot;, FUNC_NAME, LIB_SO_NAME);
                exit(-1);
        }
        f(&quot;Hello World&quot;);

        exit(0);
}
</code></pre><p>&#x6F14;&#x793A;&#xFF1A;</p>
<pre><code>$ gcc -o test1 test1.c -ldl
</code></pre><p>&#x9019;&#x7A2E;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x7121;&#x9808;&#x5305;&#x542B;&#x982D;&#x6587;&#x4EF6;&#x3002;&#x5F9E;&#x9019;&#x500B;&#x4EE3;&#x78BC;&#x4E2D;&#x5F88;&#x5BB9;&#x6613;&#x770B;&#x51FA;&#x7B26;&#x865F;&#x91CD;&#x5B9A;&#x4F4D;&#x7684;&#x904E;&#x7A0B;&#xFF1A; </p>
<ul>
<li>&#x9996;&#x5148;&#x901A;&#x904E; <code>dlopen</code> &#x627E;&#x5230;&#x4F9D;&#x8CF4;&#x5EAB;&#xFF0C;&#x4E26;&#x52A0;&#x8F09;&#x5230;&#x5167;&#x5B58;&#x4E2D;&#xFF0C;&#x518D;&#x8FD4;&#x56DE;&#x8A72;&#x5EAB;&#x7684; <code>handle</code>&#xFF0C;&#x901A;&#x904E; <code>dlopen</code> &#x6211;&#x5011;&#x53EF;&#x4EE5;&#x6307;&#x5B9A; <code>RTLD_LAZY</code> &#x63A1;&#x7528; <code>lazy mode</code> &#x52D5;&#x614B;&#x93C8;&#x63A5;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x63A1;&#x7528; <code>RTLD_NOW</code> &#x5247;&#x548C;&#x96B1;&#x5F0F;&#x8ABF;&#x7528;&#x6642;&#x8A2D;&#x7F6E; <code>LD_BIN_NOW</code> &#x985E;&#x4F3C;&#x3002;</li>
<li>&#x627E;&#x5230;&#x8A72;&#x5EAB;&#x4EE5;&#x5F8C;&#x5C31;&#x662F;&#x5C0D;&#x67D0;&#x500B;&#x7B26;&#x865F;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#xFF0C;&#x9019;&#x88E1;&#x662F;&#x78BA;&#x5B9A; <code>myprintf</code> &#x51FD;&#x6578;&#x7684;&#x5730;&#x5740;&#x3002;</li>
<li>&#x627E;&#x5230;&#x51FD;&#x6578;&#x5730;&#x5740;&#x4EE5;&#x5F8C;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8ABF;&#x7528;&#x8A72;&#x51FD;&#x6578;&#x4E86;&#x3002;</li>
</ul>
<p>&#x95DC;&#x65BC; <code>dlopen</code>&#xFF0C;<code>dlsym</code> &#x7B49;&#x5F8C;&#x81FA;&#x5DE5;&#x4F5C;&#x7D30;&#x7BC0;&#x5EFA;&#x8B70;&#x53C3;&#x8003;&#x8CC7;&#x6599; <a href="http://www.x86.org/ftp/manuals/tools/elf.pdf" target="_blank">[15]</a> &#x3002;</p>
<p>&#x96B1;&#x5F0F;&#x8ABF;&#x7528;&#x7684;&#x52D5;&#x614B;&#x7B26;&#x865F;&#x93C8;&#x63A5;&#x904E;&#x7A0B;&#x548C;&#x4E0A;&#x9762;&#x985E;&#x4F3C;&#x3002;&#x4E0B;&#x9762;&#x901A;&#x904E;&#x4E00;&#x4E9B;&#x5BE6;&#x4F8B;&#x4F86;&#x78BA;&#x5B9A;&#x4E4B;&#x524D;&#x6C92;&#x6709;&#x660E;&#x78BA;&#x7684;&#x5169;&#x500B;&#x5167;&#x5BB9;&#xFF1A;&#x5373;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D;&#x7684;&#x7B2C;&#x4E8C;&#x9805;&#x548C;&#x7B2C;&#x4E09;&#x9805;&#xFF0C;&#x4E26;&#x9032;&#x4E00;&#x6B65;&#x8A0E;&#x8AD6;lazy mode&#x548C;&#x975E;lazy mode&#x7684;&#x5340;&#x5225;&#x3002;</p>
<p><span id="toc_23258_14315_16"></span></p>
<h2 id="%E5%8B%95%E6%85%8B%E9%8F%88%E6%8E%A5%E9%81%8E%E7%A8%8B">&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x904E;&#x7A0B;</h2>
<p>&#x56E0;&#x70BA;&#x901A;&#x904E; <code>ELF</code> &#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x5011;&#x5C31;&#x53EF;&#x4EE5;&#x78BA;&#x5B9A;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x56E0;&#x6B64;&#x70BA;&#x4E86;&#x78BA;&#x5B9A;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4F4D;&#x7F6E;&#x7684;&#x7B2C;&#x4E09;&#x9805;&#x548C;&#x7B2C;&#x56DB;&#x9805;&#x7684;&#x5167;&#x5BB9;&#xFF0C;&#x6709;&#x5169;&#x7A2E;&#x8FA6;&#x6CD5;&#xFF1A;</p>
<ul>
<li>&#x901A;&#x904E; <code>gdb</code> &#x8ABF;&#x8A66;&#x3002;</li>
<li>&#x76F4;&#x63A5;&#x5728;&#x51FD;&#x6578;&#x5167;&#x90E8;&#x6253;&#x5370;&#x3002;</li>
</ul>
<p>&#x56E0;&#x70BA;&#x8CC7;&#x6599;<a href="http://elfhack.whitecell.org/mydocs/ELF_symbol_resolve_process1.txt" target="_blank">[3]</a>&#x8A73;&#x7D30;&#x4ECB;&#x7D39;&#x4E86;&#x7B2C;&#x4E00;&#x7A2E;&#x65B9;&#x6CD5;&#xFF0C;&#x9019;&#x88E1;&#x8A66;&#x8457;&#x901A;&#x904E;&#x7B2C;&#x4E8C;&#x7A2E;&#x65B9;&#x6CD5;&#x4F86;&#x78BA;&#x5B9A;&#x9019;&#x5169;&#x500B;&#x5730;&#x5740;&#x7684;&#x503C;&#x3002;</p>
<pre><code>/**
 * got.c -- get the relative content of the got(global offset table) of an elf file
 */

#include &lt;stdio.h&gt;

#define GOT 0x8049614

int main(int argc, char *argv[])
{
        long got2, got3;
        long old_addr, new_addr;

        got2=*(long *)(GOT+4);
        got3=*(long *)(GOT+8);
        old_addr=*(long *)(GOT+24);

        printf(&quot;Hello World\n&quot;);

        new_addr=*(long *)(GOT+24);

        printf(&quot;got2: 0x%0x, got3: 0x%0x, old_addr: 0x%0x, new_addr: 0x%0x\n&quot;,
                                        got2, got3, old_addr, new_addr);

        return 0;
}
</code></pre><p>&#x5728;&#x5BEB;&#x597D;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x78BC;&#x5F8C;&#x5C31;&#x9700;&#x8981;&#x78BA;&#x5B9A;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x7136;&#x5F8C;&#x628A;&#x8A72;&#x5730;&#x5740;&#x8A2D;&#x7F6E;&#x70BA;&#x4EE3;&#x78BC;&#x4E2D;&#x7684;&#x5B8F; <code>GOT</code> &#x3002;</p>
<pre><code>$ make got
$ readelf -d got | grep PLTGOT
 0x00000003 (PLTGOT)                     0x8049614
</code></pre><p><strong>&#x6CE8;</strong>&#xFF1A;&#x9019;&#x88E1;&#x5047;&#x8A2D;&#x5927;&#x5BB6;&#x7528;&#x7684;&#x90FD;&#x662F; <code>i386</code> &#x7684;&#x7CFB;&#x7D71;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x5728; <code>X86_64</code> &#x4F4D;&#x7CFB;&#x7D71;&#x4E0A;&#x8981;&#x7DE8;&#x8B6F;&#x751F;&#x6210; <code>i386</code> &#x4E0A;&#x7684;&#x53EF;&#x57F7;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x7D66; <code>gcc</code> &#x50B3;&#x905E;&#x4E00;&#x500B; <code>-m32</code> &#x53C3;&#x6578;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre><code>$ gcc -m32 -o got got.c
</code></pre><p>&#x628A;&#x5730;&#x5740; <code>0x8049614</code> &#x66FF;&#x63DB;&#x5230;&#x4E0A;&#x8FF0;&#x4EE3;&#x78BC;&#x4E2D;&#xFF0C;&#x7136;&#x5F8C;&#x91CD;&#x65B0;&#x7DE8;&#x8B6F;&#x904B;&#x884C;&#xFF0C;&#x67E5;&#x770B;&#x7D50;&#x679C;&#x3002;</p>
<pre><code>$ make got
$ Hello World
got2: 0xb7f376d8, got3: 0xb7f2ef10, old_addr: 0x80482da, new_addr: 0xb7e19a20
$ ./got
Hello World
got2: 0xb7f1e6d8, got3: 0xb7f15f10, old_addr: 0x80482da, new_addr: 0xb7e00a20
</code></pre><p>&#x901A;&#x904E;&#x5169;&#x6B21;&#x904B;&#x884C;&#xFF0C;&#x767C;&#x73FE;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D;&#x7684;&#x9019;&#x5169;&#x9805;&#x662F;&#x8B8A;&#x5316;&#x7684;&#xFF0C;&#x4E26;&#x4E14; <code>printf</code> &#x7684;&#x5730;&#x5740;&#x5C0D;&#x61C9;&#x7684; <code>new_addr</code> &#x4E5F;&#x662F;&#x8B8A;&#x5316;&#x7684;&#xFF0C;&#x8AAA;&#x660E; <code>libc</code> &#x548C; <code>ld-linux</code> &#x9019;&#x5169;&#x500B;&#x5EAB;&#x555F;&#x52D5;&#x4EE5;&#x5F8C;&#x5C0D;&#x61C9;&#x7684;&#x865B;&#x64EC;&#x5730;&#x5740;&#x4E26;&#x4E0D;&#x78BA;&#x5B9A;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x7121;&#x6CD5;&#x76F4;&#x63A5;&#x8DDF;&#x8E64;&#x5230;&#x90A3;&#x500B;&#x5730;&#x5740;&#x8655;&#x7684;&#x5167;&#x5BB9;&#xFF0C;&#x9084;&#x5F97;&#x85C9;&#x52A9;&#x8ABF;&#x8A66;&#x5DE5;&#x5177;&#xFF0C;&#x4EE5;&#x4FBF;&#x78BA;&#x8A8D;&#x5B83;&#x5011;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x91CD;&#x65B0;&#x7DE8;&#x8B6F; <code>got</code>&#xFF0C;&#x52A0;&#x4E0A; <code>-g</code> &#x53C3;&#x6578;&#x4EE5;&#x4FBF;&#x8ABF;&#x8A66;&#xFF0C;&#x4E26;&#x901A;&#x904E;&#x8ABF;&#x8A66;&#x78BA;&#x8A8D; <code>got2</code>&#xFF0C;<code>got3</code>&#xFF0C;&#x4EE5;&#x53CA;&#x8ABF;&#x7528; <code>printf</code> &#x524D;&#x5F8C; <code>printf</code> &#x5730;&#x5740;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#x60C5;&#x6CC1;&#x3002;</p>
<pre><code>$ gcc -g -o got got.c
$ gdb ./got
(gdb) l
5       #include &lt;stdio.h&gt;
6
7       #define GOT 0x8049614
8
9       int main(int argc, char *argv[])
10      {
11              long got2, got3;
12              long old_addr, new_addr;
13
14              got2=*(long *)(GOT+4);
(gdb) l
15              got3=*(long *)(GOT+8);
16              old_addr=*(long *)(GOT+24);
17
18              printf(&quot;Hello World\n&quot;);
19
20              new_addr=*(long *)(GOT+24);
21
22              printf(&quot;got2: 0x%0x, got3: 0x%0x, old_addr: 0x%0x, new_addr: 0x%0x\n&quot;,
23                                              got2, got3, old_addr, new_addr);
24
</code></pre><p>&#x5728;&#x7B2C;&#x4E00;&#x500B; <code>printf</code> &#x8655;&#x8A2D;&#x7F6E;&#x4E00;&#x500B;&#x65B7;&#x9EDE;&#xFF1A;</p>
<pre><code>(gdb) break 18
Breakpoint 1 at 0x80483c3: file got.c, line 18.
</code></pre><p>&#x5728;&#x7B2C;&#x4E8C;&#x500B; <code>printf</code> &#x8655;&#x8A2D;&#x7F6E;&#x4E00;&#x500B;&#x65B7;&#x9EDE;&#xFF1A;</p>
<pre><code>(gdb) break 22
Breakpoint 2 at 0x80483dd: file got.c, line 22.
</code></pre><p>&#x904B;&#x884C;&#x5230;&#x7B2C;&#x4E00;&#x500B; <code>printf</code> &#x4E4B;&#x524D;&#x6703;&#x505C;&#x6B62;&#xFF1A;</p>
<pre><code>(gdb) r
Starting program: /mnt/hda8/Temp/c/program/got

Breakpoint 1, main () at got.c:18
18              printf(&quot;Hello World\n&quot;);
</code></pre><p>&#x67E5;&#x770B;&#x57F7;&#x884C; <code>printf</code> &#x4E4B;&#x524D;&#x7684;&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x5167;&#x5BB9;&#xFF1A;</p>
<pre><code>(gdb) x/8x 0x8049614
0x8049614 &lt;_GLOBAL_OFFSET_TABLE_&gt;:      0x08049548      0xb7f3c6d8      0xb7f33f10      0x080482aa
0x8049624 &lt;_GLOBAL_OFFSET_TABLE_+16&gt;:   0xb7ddbd20      0x080482ca      0x080482da      0x00000000
</code></pre><p>&#x67E5;&#x770B; <code>GOT</code> &#x8868;&#x9805;&#x7684;&#x6700;&#x6709;&#x4E00;&#x9805;&#xFF0C;&#x767C;&#x73FE;&#x525B;&#x597D;&#x662F; <code>PLT</code> &#x8868;&#x4E2D; <code>push</code> &#x6307;&#x4EE4;&#x7684;&#x5730;&#x5740;&#xFF1A;</p>
<pre><code>(gdb) disassemble 0x080482da
Dump of assembler code for function puts@plt:
0x080482d4 &lt;puts@plt+0&gt;:        jmp    *0x804962c
0x080482da &lt;puts@plt+6&gt;:        push   $0x18
0x080482df &lt;puts@plt+11&gt;:       jmp    0x8048294 &lt;_init+24&gt;
</code></pre><p>&#x8AAA;&#x660E;&#x6B64;&#x6642;&#x9084;&#x6C92;&#x6709;&#x9032;&#x884C;&#x9032;&#x884C;&#x7B26;&#x865F;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#xFF0C;&#x4E0D;&#x904E;&#x767C;&#x73FE;&#x4E26;&#x975E; <code>printf</code>&#xFF0C;&#x800C;&#x662F; <code>puts(1)</code>&#x3002;</p>
<p>&#x63A5;&#x8457;&#x67E5;&#x770B; <code>GOT</code> &#x7B2C;&#x4E09;&#x9805;&#x7684;&#x5167;&#x5BB9;&#xFF0C;&#x525B;&#x597D;&#x662F; <code>dl-linux</code> &#x5C0D;&#x61C9;&#x7684;&#x4EE3;&#x78BC;&#xFF1A;</p>
<pre><code>(gdb) disassemble 0xb7f33f10
Dump of assembler code for function _dl_runtime_resolve:
0xb7f33f10 &lt;_dl_runtime_resolve+0&gt;:     push   %eax
0xb7f33f11 &lt;_dl_runtime_resolve+1&gt;:     push   %ecx
0xb7f33f12 &lt;_dl_runtime_resolve+2&gt;:     push   %edx
</code></pre><p>&#x53EF;&#x901A;&#x904E; <code>nm /lib/ld-linux.so.2 | grep _dl_runtime_resolve</code> &#x9032;&#x884C;&#x78BA;&#x8A8D;&#x3002;</p>
<p>&#x7136;&#x5F8C;&#x67E5;&#x770B; <code>GOT</code> &#x8868;&#x7B2C;&#x4E8C;&#x9805;&#x8655;&#x7684;&#x5167;&#x5BB9;&#xFF0C;&#x770B;&#x4E0D;&#x51FA;&#x4EC0;&#x9EBC;&#x7279;&#x5225;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53CD;&#x7DE8;&#x8B6F;&#x6642;&#x63D0;&#x793A;&#x7121;&#x6CD5;&#x53CD;&#x7DE8;&#x8B6F;&#xFF1A;</p>
<pre><code>(gdb) x/8x 0xb7f3c6d8
0xb7f3c6d8:     0x00000000      0xb7f39c3d      0x08049548      0xb7f3c9b8
0xb7f3c6e8:     0x00000000      0xb7f3c6d8      0x00000000      0xb7f3c9a4
</code></pre><p>&#x5728; <code>*(0xb7f33f10)</code> &#x6307;&#x5411;&#x7684;&#x4EE3;&#x78BC;&#x8655;&#x8A2D;&#x7F6E;&#x4E00;&#x500B;&#x65B7;&#x9EDE;&#xFF0C;&#x78BA;&#x8A8D;&#x5B83;&#x662F;&#x5426;&#x88AB;&#x57F7;&#x884C;&#xFF1A;</p>
<pre><code>(gdb) break *(0xb7f33f10)
break *(0xb7f33f10)
Breakpoint 3 at 0xb7f3cf10
(gdb) c
Continuing.

Breakpoint 3, 0xb7f3cf10 in _dl_runtime_resolve () from /lib/ld-linux.so.2
</code></pre><p>&#x7E7C;&#x7E8C;&#x904B;&#x884C;&#xFF0C;&#x76F4;&#x5230;&#x7B2C;&#x4E8C;&#x6B21;&#x8ABF;&#x7528; <code>printf</code> &#xFF1A;</p>
<pre><code>(gdb)  c
Continuing.
Hello World

Breakpoint 2, main () at got.c:22
22              printf(&quot;got2: 0x%0x, got3: 0x%0x, old_addr: 0x%0x, new_addr: 0x%0x\n&quot;,
</code></pre><p>&#x518D;&#x6B21;&#x67E5;&#x770B; <code>GOT</code> &#x8868;&#x9805;&#xFF0C;&#x767C;&#x73FE; <code>GOT</code> &#x8868;&#x7684;&#x6700;&#x5F8C;&#x4E00;&#x9805;&#x7684;&#x503C;&#x61C9;&#x8A72;&#x88AB;&#x4FEE;&#x6539;&#xFF1A;</p>
<pre><code>(gdb) x/8x 0x8049614
0x8049614 &lt;_GLOBAL_OFFSET_TABLE_&gt;:      0x08049548      0xb7f3c6d8      0xb7f33f10      0x080482aa
0x8049624 &lt;_GLOBAL_OFFSET_TABLE_+16&gt;:   0xb7ddbd20      0x080482ca      0xb7e1ea20      0x00000000
</code></pre><p>&#x67E5;&#x770B; <code>GOT</code> &#x8868;&#x6700;&#x5F8C;&#x4E00;&#x9805;&#xFF0C;&#x767C;&#x73FE;&#x8B8A;&#x6210;&#x4E86; <code>puts</code> &#x51FD;&#x6578;&#x7684;&#x4EE3;&#x78BC;&#xFF0C;&#x8AAA;&#x660E;&#x9032;&#x884C;&#x4E86;&#x7B26;&#x865F; <code>puts</code> &#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#xFF08;2&#xFF09;&#xFF1A;</p>
<pre><code>(gdb) disassemble 0xb7e1ea20
Dump of assembler code for function puts:
0xb7e1ea20 &lt;puts+0&gt;:    push   %ebp
0xb7e1ea21 &lt;puts+1&gt;:    mov    %esp,%ebp
0xb7e1ea23 &lt;puts+3&gt;:    sub    $0x1c,%esp
</code></pre><p>&#x901A;&#x904E;&#x6F14;&#x793A;&#x767C;&#x73FE;&#x4E00;&#x500B;&#x554F;&#x984C;&#xFF08;1&#xFF09;&#xFF08;2&#xFF09;&#xFF0C;&#x5373;&#x672C;&#x4F86;&#x8ABF;&#x7528;&#x7684;&#x662F; <code>printf</code>&#xFF0C;&#x70BA;&#x4EC0;&#x9EBC;&#x6703;&#x9032;&#x884C; <code>puts</code> &#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#x5462;&#xFF1F;&#x901A;&#x904E; <code>gcc -S</code> &#x53C3;&#x6578;&#x7DE8;&#x8B6F;&#x751F;&#x6210;&#x5F59;&#x7DE8;&#x4EE3;&#x78BC;&#x5F8C;&#x767C;&#x73FE;&#xFF0C;<code>gcc</code> &#x628A; <code>printf</code> &#x66FF;&#x63DB;&#x6210;&#x4E86; <code>puts</code>&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x96E3;&#x7406;&#x89E3;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x904E;&#x7A0B;&#x70BA;&#x4EC0;&#x9EBC;&#x5C0D; <code>puts</code> &#x9032;&#x884C;&#x4E86;&#x91CD;&#x5B9A;&#x4F4D;&#x3002;</p>
<p>&#x5F9E;&#x6F14;&#x793A;&#x4E2D;&#x4E0D;&#x96E3;&#x767C;&#x73FE;&#xFF0C;&#x7576;&#x7B26;&#x865F;&#x88AB;&#x4F7F;&#x7528;&#x5230;&#x6642;&#x624D;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#x3002;&#x56E0;&#x70BA;&#x901A;&#x904E;&#x8ABF;&#x8A66;&#x767C;&#x73FE;&#x5728;&#x57F7;&#x884C; <code>printf</code> &#x4E4B;&#x5F8C;&#xFF0C;<code>GOT</code> &#x8868;&#x9805;&#x7684;&#x6700;&#x5F8C;&#x4E00;&#x9805;&#x624D;&#x88AB;&#x4FEE;&#x6539;&#x70BA; <code>printf</code> &#xFF08;&#x78BA;&#x5207;&#x7684;&#x8AAA;&#x662F; <code>puts</code>&#xFF09;&#x7684;&#x5730;&#x5740;&#x3002;&#x9019;&#x5C31;&#x662F;&#x6240;&#x8B02;&#x7684; <code>lazy mode</code> &#x52D5;&#x614B;&#x7B26;&#x865F;&#x93C8;&#x63A5;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x5011;&#x5BB9;&#x6613;&#x767C;&#x73FE; <code>GOT</code> &#x8868;&#x7B2C;&#x4E09;&#x9805;&#x78BA;&#x5BE6;&#x662F; <code>ld-linux.so</code> &#x4E2D;&#x7684;&#x67D0;&#x500B;&#x51FD;&#x6578;&#x5730;&#x5740;&#xFF0C;&#x4E26;&#x4E14;&#x767C;&#x73FE;&#x5728;&#x57F7;&#x884C; <code>printf</code> &#x8A9E;&#x53E5;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x9032;&#x5165;&#x4E86; <code>ld-linux.so</code> &#x7684; <code>_dl_runtime_resolve</code> &#x51FD;&#x6578;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x5B83;&#x8FD4;&#x56DE;&#x4E4B;&#x5F8C;&#xFF0C;<code>GOT</code> &#x8868;&#x7684;&#x6700;&#x5F8C;&#x4E00;&#x9805;&#x624D;&#x8B8A;&#x70BA; <code>printf</code> &#xFF08;<code>puts</code>&#xFF09;&#x7684;&#x5730;&#x5740;&#x3002;</p>
<p>&#x672C;&#x4F86;&#x6253;&#x7B97;&#x901A;&#x904E;&#x7B2C;&#x4E00;&#x500B;&#x65B7;&#x9EDE;&#x78BA;&#x8A8D;&#x7B2C;&#x4E8C;&#x6B21;&#x8ABF;&#x7528; <code>printf</code> &#x6642;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x9032;&#x884C;&#x52D5;&#x614B;&#x7B26;&#x865F;&#x93C8;&#x63A5;&#x7684;&#xFF0C;&#x4E0D;&#x904E;&#x56E0;&#x70BA; <code>gcc</code> &#x628A;&#x7B2C;&#x4E00;&#x500B;&#x66FF;&#x63DB;&#x6210;&#x4E86; <code>puts</code>&#xFF0C;&#x6240;&#x4EE5;&#x9019;&#x88E1;&#x6C92;&#x6709;&#x8FA6;&#x6CD5;&#x7E7C;&#x7E8C;&#x8ABF;&#x8A66;&#x3002;&#x5982;&#x679C;&#x60F3;&#x78BA;&#x8A8D;&#x9019;&#x500B;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x5BEB;&#x5169;&#x500B;&#x4E00;&#x6A23;&#x7684; <code>printf</code> &#x8A9E;&#x53E5;&#x770B;&#x770B;&#x3002;&#x5BE6;&#x969B;&#x4E0A;&#x7B2C;&#x4E00;&#x6B21;&#x93C8;&#x63A5;&#x4EE5;&#x5F8C;&#xFF0C;<code>GOT</code> &#x8868;&#x7684;&#x7B2C;&#x4E09;&#x9805;&#x5DF2;&#x7D93;&#x4FEE;&#x6539;&#x4E86;&#xFF0C;&#x7576;&#x4E0B;&#x6B21;&#x518D;&#x9032;&#x5165;&#x904E;&#x7A0B;&#x93C8;&#x63A5;&#x8868;&#xFF0C;&#x4E26;&#x57F7;&#x884C; <code>jmp *(&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D;&#x67D0;&#x4E00;&#x500B;&#x5730;&#x5740;)</code> &#x6307;&#x4EE4;&#x6642;&#xFF0C;<code>*(&#x5168;&#x5C40;&#x504F;&#x79FB;&#x8868;&#x4E2D;&#x67D0;&#x4E00;&#x500B;&#x5730;&#x5740;)</code> &#x5DF2;&#x7D93;&#x88AB;&#x4FEE;&#x6539;&#x70BA;&#x4E86;&#x5C0D;&#x61C9;&#x7B26;&#x865F;&#x7684;&#x5BE6;&#x969B;&#x5730;&#x5740;&#xFF0C;&#x9019;&#x6A23; <code>jmp</code> &#x8A9E;&#x53E5;&#x6703;&#x81EA;&#x52D5;&#x8DF3;&#x8F49;&#x5230;&#x7B26;&#x865F;&#x7684;&#x5730;&#x5740;&#x8655;&#x904B;&#x884C;&#xFF0C;&#x57F7;&#x884C;&#x5177;&#x9AD4;&#x7684;&#x51FD;&#x6578;&#x4EE3;&#x78BC;&#xFF0C;&#x56E0;&#x6B64;&#x7121;&#x9808;&#x518D;&#x9032;&#x884C;&#x91CD;&#x5B9A;&#x4F4D;&#x3002;</p>
<p>&#x5230;&#x73FE;&#x5728; <code>GOT</code> &#x8868;&#x4E2D;&#x53EA;&#x5269;&#x4E0B;&#x7B2C;&#x4E8C;&#x9805;&#x9084;&#x6C92;&#x6709;&#x88AB;&#x78BA;&#x8A8D;&#xFF0C;&#x901A;&#x904E;&#x8CC7;&#x6599; <a href="http://elfhack.whitecell.org/mydocs/ELF_symbol_resolve_process1.txt" target="_blank">[3]</a> &#x6211;&#x5011;&#x767C;&#x73FE;&#xFF0C;&#x8A72;&#x9805;&#x6307;&#x5411;&#x4E00;&#x500B; <code>link_map</code> &#x985E;&#x578B;&#x7684;&#x6578;&#x64DA;&#xFF0C;&#x662F;&#x4E00;&#x500B;&#x9451;&#x5225;&#x4FE1;&#x606F;&#xFF0C;&#x5177;&#x9AD4;&#x4F5C;&#x7528;&#x5C0D;&#x6211;&#x5011;&#x4F86;&#x8AAA;&#x4E26;&#x4E0D;&#x662F;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4E86;&#x89E3;&#xFF0C;&#x8ACB;&#x53C3;&#x8003;&#x8CC7;&#x6599; <a href="http://www.muppetlabs.com/~breadbox/software/ELF.txt" target="_blank">[16]</a> &#x3002;</p>
<p>&#x4E0B;&#x9762;&#x901A;&#x904E;&#x8A2D;&#x7F6E; <code>LD_BIND_NOW</code> &#x518D;&#x904B;&#x884C;&#x4E00;&#x4E0B; <code>got</code> &#x7A0B;&#x5E8F;&#x4E26;&#x67E5;&#x770B;&#x7D50;&#x679C;&#xFF0C;&#x6BD4;&#x8F03;&#x5B83;&#x8207;&#x9ED8;&#x8A8D;&#x7684;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x65B9;&#x5F0F;&#xFF08;<code>lazy mode</code>&#xFF09;&#x7684;&#x7570;&#x540C;&#x3002;</p>
<ul>
<li><p>&#x8A2D;&#x7F6E; <code>LD_BIND_NOW</code> &#x74B0;&#x5883;&#x8B8A;&#x91CF;&#x7684;&#x904B;&#x884C;&#x7D50;&#x679C;</p>
<pre><code>  $ LD_BIND_NOW=1 ./got
  Hello World
  got2: 0x0, got3: 0x0, old_addr: 0xb7e61a20, new_addr: 0xb7e61a20
</code></pre></li>
<li><p>&#x9ED8;&#x8A8D;&#x60C5;&#x6CC1;&#x4E0B;&#x7684;&#x904B;&#x884C;&#x7D50;&#x679C;</p>
<pre><code>  $ ./got
  Hello World
  got2: 0xb7f806d8, got3: 0xb7f77f10, old_addr: 0x80482da, new_addr: 0xb7e62a20
</code></pre></li>
</ul>
<p>&#x901A;&#x904E;&#x6BD4;&#x8F03;&#x5BB9;&#x6613;&#x767C;&#x73FE;&#xFF0C;&#x5728;&#x975E; <code>lazy mode</code> &#xFF08;&#x8A2D;&#x7F6E; <code>LD_BIND_NOW</code> &#x5F8C;&#xFF09;&#x4E0B;&#xFF0C;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x4E4B;&#x524D;&#x7B26;&#x865F;&#x7684;&#x5730;&#x5740;&#x5C31;&#x5DF2;&#x7D93;&#x88AB;&#x78BA;&#x5B9A;&#xFF0C;&#x5373;&#x8ABF;&#x7528; <code>printf</code> &#x4E4B;&#x524D; <code>GOT</code> &#x8868;&#x7684;&#x6700;&#x5F8C;&#x4E00;&#x9805;&#x5DF2;&#x7D93;&#x88AB;&#x78BA;&#x5B9A;&#x70BA;&#x4E86; <code>printf</code> &#x51FD;&#x6578;&#x5C0D;&#x61C9;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x5373; <code>0xb7e61a20</code>&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x7A0B;&#x5E8F;&#x904B;&#x884C;&#x4E4B;&#x5F8C;&#xFF0C;<code>GOT</code> &#x8868;&#x7684;&#x7B2C;&#x4E8C;&#x9805;&#x548C;&#x7B2C;&#x4E09;&#x9805;&#x5C31;&#x4FDD;&#x6301;&#x70BA; 0&#xFF0C;&#x56E0;&#x70BA;&#x6B64;&#x6642;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5B83;&#x5011;&#x9032;&#x884C;&#x7B26;&#x865F;&#x7684;&#x91CD;&#x5B9A;&#x4F4D;&#x4E86;&#x3002;&#x901A;&#x904E;&#x9019;&#x6A23;&#x4E00;&#x500B;&#x6BD4;&#x8F03;&#xFF0C;&#x5C31;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3; <code>lazy mode</code> &#x7684;&#x7279;&#x9EDE;&#x4E86;&#xFF1A;&#x5728;&#x7528;&#x5230;&#x7684;&#x6642;&#x5019;&#x624D;&#x89E3;&#x6790;&#x3002;</p>
<p>&#x5230;&#x9019;&#x88E1;&#xFF0C;&#x7B26;&#x865F;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7684;&#x7D30;&#x7BC0;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x5DF2;&#x7D93;&#x6E05;&#x695A;&#x4E86;&#x3002;</p>
<p><span id="toc_23258_14315_17"></span></p>
<h2 id="%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99">&#x53C3;&#x8003;&#x8CC7;&#x6599;</h2>
<ul>
<li><p><a href="http://www.ccw.com.cn/htm/app/linux/develop/01_8_6_2.asp" target="_blank">LINUX &#x7CFB;&#x7D71;&#x4E2D;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5275;&#x5EFA;&#x8207;&#x4F7F;&#x7528;</a></p>
</li>
<li><p><a href="http://www.vchome.net/tech/dll/dll9.htm" target="_blank">LINUX &#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x9AD8;&#x7D1A;&#x61C9;&#x7528;</a></p>
</li>
<li><p><a href="http://elfhack.whitecell.org/mydocs/ELF_symbol_resolve_process1.txt" target="_blank">ELF &#x52D5;&#x614B;&#x89E3;&#x6790;&#x7B26;&#x865F;&#x904E;&#x7A0B;(&#x4FEE;&#x8A02;&#x7248;)</a></p>
</li>
<li><p><a href="http://unix-cd.com/unixcd12/article_5065.html" target="_blank">&#x5982;&#x4F55;&#x5728; Linux &#x4E0B;&#x8ABF;&#x8A66;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;</a></p>
</li>
<li><p><a href="http://www.ibm.com/developerworks/linux/library/l-shlibs.html" target="_blank">Dissecting shared libraries</a></p>
</li>
<li><p><a href="http://fanqiang.chinaunix.net/safe/system/2007-02-01/4870.shtml" target="_blank">&#x95DC;&#x65BC; Linux &#x548C; Unix &#x52D5;&#x614B;&#x93C8;&#x63A5;&#x5EAB;&#x7684;&#x5B89;&#x5168;</a></p>
</li>
<li><p><a href="http://article.pchome.net/content-323084.html" target="_blank">Linux &#x7CFB;&#x7D71;&#x4E0B;&#x89E3;&#x6790; ELF &#x6587;&#x4EF6; DT_RPATH &#x5F8C;&#x9580;</a></p>
</li>
<li><p><a href="http://162.105.203.48/web/gaikuang/submission/TN05.ELF.Format.Summary.pdf" target="_blank">ELF &#x6587;&#x4EF6;&#x683C;&#x5F0F;&#x5206;&#x6790;</a></p>
</li>
<li><p><a href="02-chapter5.html">&#x7DE9;&#x885D;&#x5340;&#x6EA2;&#x51FA;&#x8207;&#x6CE8;&#x5165;&#x5206;&#x6790;(&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#xFF1A;&#x7DE9;&#x885D;&#x5340;&#x6EA2;&#x51FA;&#x548C;&#x6CE8;&#x5165;&#x5BE6;&#x4F8B;)</a></p>
</li>
<li><a href="02-chapter2.html">Gcc &#x7DE8;&#x8B6F;&#x7684;&#x80CC;&#x5F8C;(&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#xFF1A;&#x5F59;&#x7DE8;&#x548C;&#x93C8;&#x63A5;)</a></li>
<li><a href="02-chapter3.html">&#x7A0B;&#x5E8F;&#x57F7;&#x884C;&#x7684;&#x90A3;&#x4E00;&#x524E;&#x90A3;</a></li>
</ul>
<ul>
<li><p>What is Linux-gate.so.1: <a href="http://www.trilithium.com/johan/2005/08/linux-gate/" target="_blank">[1]</a>, <a href="http://isomerica.net/archives/2007/05/28/what-is-linux-gateso1-and-why-is-it-missing-on-x86-64/" target="_blank">[2]</a>, <a href="http://www.linux010.cn/program/Linux-gateso1-DeHanYi-pcee6103.htm" target="_blank">[3]</a></p>
</li>
<li><p><a href="http://www.ibm.com/developerworks/cn/linux/l-overflow/index.html" target="_blank">Linux &#x4E0B;&#x7DE9;&#x885D;&#x5340;&#x6EA2;&#x51FA;&#x653B;&#x64CA;&#x7684;&#x539F;&#x7406;&#x53CA;&#x5C0D;&#x7B56;</a></p>
</li>
<li><p>Intel &#x5E73;&#x81FA;&#x4E0B; Linux &#x4E2D; ELF &#x6587;&#x4EF6;&#x52D5;&#x614B;&#x93C8;&#x63A5;&#x7684;&#x52A0;&#x8F09;&#x3001;&#x89E3;&#x6790;&#x53CA;&#x5BE6;&#x4F8B;&#x5206;&#x6790; <a href="http://www.ibm.com/developerworks/cn/linux/l-elf/part1/index.html" target="_blank">part1</a>, <a href="http://www.ibm.com/developerworks/cn/linux/l-elf/part2/index.html" target="_blank">part2</a></p>
</li>
<li><p><a href="http://www.x86.org/ftp/manuals/tools/elf.pdf" target="_blank">ELF file format and ABI</a></p>
</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../zh/chapters/02-chapter3.html" class="navigation navigation-prev " aria-label="Previous page: 程序執行的一剎那"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../zh/chapters/02-chapter5.html" class="navigation navigation-next " aria-label="Next page: 緩衝區溢出與注入分析"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-google_code_prettify/google-code-prettify.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-google_code_prettify/plugin.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-collapsible-menu/plugin.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
